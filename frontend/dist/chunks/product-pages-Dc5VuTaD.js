import{j as e,aG as s,aH as a,aI as t,aJ as r,aK as l,aL as i,r as c,u as n,N as d,X as o,a6 as m,P as x,aM as h,aN as g,aO as u,aD as j,a5 as p,aP as f,aQ as N,aR as b,aS as v,aT as y,aU as w,aV as k,aW as S,e as C,f as P,i as R,aa as z,k as A,g as F,aX as $,aY as O,aZ as M,a_ as I,a$ as D,b0 as V,b1 as _,b2 as T,b3 as E,H as B,V as L,b4 as q,b5 as U,b6 as H,b7 as W,b8 as Q,h as J,M as K,ab as Y,E as Z,aw as X,ax as G,z as ee,b9 as se,ba as ae,bb as te,U as re}from"./react-vendor-CxxVBidG.js";import{c as le,p as ie,B as ce,I as ne,k as de,a as oe,l as me,j as xe,u as he,C as ge,e as ue,W as je,S as pe,T as fe,f as Ne,g as be,h as ve,A as ye,m as we,n as ke,r as Se}from"./account-pages-NAnqBmuv.js";import{C as Ce}from"./auth-pages-DR3EFdA3.js";import{S as Pe,a as Re,b as ze,c as Ae,d as Fe}from"./admin-pages-YrFbEUvM.js";function $e({...a}){return e.jsx(s,{"data-slot":"dropdown-menu",...a})}function Oe({...s}){return e.jsx(a,{"data-slot":"dropdown-menu-trigger",...s})}function Me({className:s,sideOffset:a=4,...l}){return e.jsx(t,{children:e.jsx(r,{"data-slot":"dropdown-menu-content",sideOffset:a,className:le("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...l})})}function Ie({className:s,inset:a,variant:t="default",...r}){return e.jsx(l,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":t,className:le("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r})}function De({className:s,...a}){return e.jsx(i,{"data-slot":"dropdown-menu-separator",className:le("bg-border -mx-1 my-1 h-px",s),...a})}const Ve=({onSearch:s,placeholder:a="Search RitKART",className:t=""})=>{const[r,l]=c.useState(""),[i,f]=c.useState("All"),[N,b]=c.useState([]),[v,y]=c.useState(!1),[w,k]=c.useState([]),[S,C]=c.useState(null),[P,R]=c.useState([]),[z,A]=c.useState([]),[F,$]=c.useState(!1),O=n(),M=c.useRef(null),I=c.useRef(null),D=c.useRef();c.useEffect(()=>{(async()=>{try{const[e,s]=await Promise.all([de.getCategories(),ie.getPopularSearchTerms(8)]);b(e),R(s)}catch(e){}})();const e=localStorage.getItem("ritkart_recent_searches");e&&A(JSON.parse(e))},[]),c.useEffect(()=>(D.current&&clearTimeout(D.current),r.trim().length>=2?D.current=setTimeout(async()=>{$(!0);try{const[e,s]=await Promise.all([ie.getSearchSuggestions(r,8),ie.getSearchAutocomplete(r,4)]);k(e),C(s)}catch(e){}$(!1)},300):(k([]),C(null),$(!1)),()=>{D.current&&clearTimeout(D.current)}),[r]),c.useEffect(()=>{const e=e=>{I.current&&!I.current.contains(e.target)&&y(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const V=(e=r,a)=>{const t=e.trim();if(!t)return;const l=[t,...z.filter(e=>e!==t)].slice(0,5);if(A(l),localStorage.setItem("ritkart_recent_searches",JSON.stringify(l)),y(!1),s)s(t,a);else{const e=new URLSearchParams;e.set("q",t),O(`/search?${e.toString()}`)}},_=e=>{l(e),V(e)},T=()=>{A([]),localStorage.removeItem("ritkart_recent_searches")};return e.jsxs("div",{className:`relative ${t}`,ref:I,children:[e.jsxs("form",{onSubmit:e=>{e.preventDefault(),V()},className:"flex",children:[e.jsxs($e,{children:[e.jsx(Oe,{asChild:!0,children:e.jsxs(ce,{variant:"outline",className:"bg-gray-200 text-gray-700 border-none rounded-l-md rounded-r-none px-3 py-2 h-10 min-w-[80px]",children:[e.jsx("span",{className:"truncate max-w-[60px]",children:i}),e.jsx(d,{className:"w-3 h-3 ml-1 flex-shrink-0"})]})}),e.jsxs(Me,{className:"max-h-64 overflow-y-auto",children:[e.jsx(Ie,{onClick:()=>f("All"),children:"All Categories"}),N.map(s=>e.jsx(Ie,{onClick:()=>f(s.name),children:s.name},s.id))]})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ne,{ref:M,type:"text",placeholder:a,value:r,onChange:e=>l(e.target.value),onFocus:()=>y(!0),className:"rounded-none border-none h-10 focus:ring-2 focus:ring-orange-400 pr-8"}),r&&e.jsx("button",{type:"button",onClick:()=>{l(""),k([]),C(null),M.current?.focus()},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(o,{className:"w-4 h-4"})})]}),e.jsx(ce,{type:"submit",className:"amazon-orange rounded-l-none rounded-r-md px-4 h-10",children:e.jsx(m,{className:"w-4 h-4"})})]}),v&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-md shadow-lg z-50 mt-1",children:r.trim().length>=2?e.jsx("div",{className:"p-2 max-h-96 overflow-y-auto",children:F?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-orange-500"})}):e.jsxs(e.Fragment,{children:[w.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(m,{className:"w-3 h-3"}),"Suggestions"]}),w.map((s,a)=>e.jsxs("button",{onClick:()=>_(s),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:s})]},a))]}),S&&e.jsxs(e.Fragment,{children:[S.products.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(x,{className:"w-3 h-3"}),"Products"]}),S.products.map((s,a)=>e.jsxs("button",{onClick:()=>_(s),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(x,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-gray-900",children:s})]},a))]}),S.brands.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(h,{className:"w-3 h-3"}),"Brands"]}),S.brands.map((s,a)=>e.jsxs("button",{onClick:()=>_(s),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-gray-900",children:s})]},a))]}),S.categories.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(g,{className:"w-3 h-3"}),"Categories"]}),S.categories.map((s,a)=>e.jsxs("button",{onClick:()=>_(s),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-gray-900",children:s})]},a))]}),S.tags.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(u,{className:"w-3 h-3"}),"Tags"]}),S.tags.map((s,a)=>e.jsxs("button",{onClick:()=>_(s),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4 text-orange-400"}),e.jsx("span",{className:"text-gray-900",children:s})]},a))]})]})]})}):e.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto",children:[z.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(j,{className:"w-3 h-3"}),"Recent Searches"]}),e.jsx("button",{onClick:T,className:"text-xs text-orange-600 hover:text-orange-700",children:"Clear all"})]}),z.map((s,a)=>e.jsxs("button",{onClick:()=>_(s),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:s})]},a))]}),P.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 px-1 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:[e.jsx(p,{className:"w-3 h-3"}),"Popular Searches"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:P.map((s,a)=>e.jsx(oe,{variant:"secondary",className:"cursor-pointer hover:bg-orange-100 hover:text-orange-700",onClick:()=>_(s),children:s},a))})]})]})})]})};function _e({...s}){return e.jsx(f,{"data-slot":"sheet",...s})}function Te({...s}){return e.jsx(N,{"data-slot":"sheet-trigger",...s})}function Ee({...s}){return e.jsx(k,{"data-slot":"sheet-portal",...s})}function Be({className:s,...a}){return e.jsx(S,{"data-slot":"sheet-overlay",className:le("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function Le({className:s,children:a,side:t="right",...r}){return e.jsxs(Ee,{children:[e.jsx(Be,{}),e.jsxs(b,{"data-slot":"sheet-content",className:le("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===t&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===t&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===t&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===t&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",s),...r,children:[a,e.jsxs(v,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(o,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function qe({className:s,...a}){return e.jsx("div",{"data-slot":"sheet-header",className:le("flex flex-col gap-1.5 p-4",s),...a})}function Ue({className:s,...a}){return e.jsx(y,{"data-slot":"sheet-title",className:le("text-foreground font-semibold",s),...a})}function He({className:s,...a}){return e.jsx(w,{"data-slot":"sheet-description",className:le("text-muted-foreground text-sm",s),...a})}const We=({product:s,size:a="default",variant:t="outline",showText:r=!1,className:l})=>{const{isInComparison:i,addToComparison:c,removeFromComparison:n,canAddMore:d}=me(),m=i(s.id),x=m?r?"Remove from Compare":"":r?"Compare":"",h=m?e.jsx(o,{className:"w-4 h-4"}):e.jsx(C,{className:"w-4 h-4"}),g=m?"default":t;return e.jsxs(ce,{onClick:e=>{e.preventDefault(),e.stopPropagation(),m?n(s.id):d&&c(s)},size:a,variant:g,disabled:!m&&!d,className:le("transition-colors",m&&"bg-blue-600 hover:bg-blue-700 text-white",!d&&!m&&"opacity-50 cursor-not-allowed",l),title:m?"Remove from comparison":"Add to comparison",children:[h,r&&x&&e.jsx("span",{className:"ml-2",children:x})]})},Qe=({product:s,variant:a="default",showQuickAdd:t=!0,className:r})=>{const{addToCart:l,loading:i}=xe(),{isAuthenticated:c}=he(),n=async e=>{if(e.preventDefault(),e.stopPropagation(),c)try{await l(s,1)}catch(a){}},d=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),o=s.originalPrice?Math.round((s.originalPrice-s.price)/s.originalPrice*100):0,m=a=>e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((s,t)=>e.jsx(A,{className:"w-4 h-4 "+(t<Math.floor(a)?"text-orange-400 fill-current":t<a?"text-orange-400 fill-current opacity-50":"text-gray-300")},t)),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",s.reviewCount,")"]})]});return"list"===a?e.jsx(ge,{className:le("amazon-card group",r),children:e.jsx(ue,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(P,{to:`/product/${s.id}`,children:e.jsxs("div",{className:"w-32 h-32 bg-gray-100 rounded-lg overflow-hidden",children:[s.thumbnail||s.images[0]?e.jsx("img",{src:s.thumbnail||s.images[0],alt:s.title,className:"w-full h-full object-cover",onError:e=>{const s=e.target;s.style.display="none",s.nextElementSibling?.classList.remove("hidden")}}):null,e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500 text-sm",children:"Product"})]})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(P,{to:`/product/${s.id}`,children:e.jsx("h3",{className:"font-medium text-lg mb-2 group-hover:text-orange-600 transition-colors line-clamp-2",children:s.title})}),m(s.rating),e.jsx("p",{className:"text-gray-600 text-sm mt-2 line-clamp-2",children:s.shortDescription||s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"amazon-price text-2xl font-bold",children:d(s.price)}),s.originalPrice&&s.originalPrice>s.price&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-500 line-through text-lg",children:d(s.originalPrice)}),e.jsxs(oe,{className:"bg-red-500 text-white",children:["-",o,"%"]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Brand: ",e.jsx("span",{className:"font-medium",children:s.brand})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-2",children:[e.jsx(ce,{onClick:n,disabled:i||0===s.stock,className:"amazon-button",children:i?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(je,{product:s,size:"sm",variant:"outline",className:"flex-1"}),e.jsx(We,{product:s,size:"sm",variant:"outline",className:"flex-1"})]})]})]})})}):e.jsx(ge,{className:le("amazon-card group h-full flex flex-col",r),children:e.jsxs(ue,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"relative mb-4",children:[o>0&&e.jsxs(oe,{className:"absolute top-2 left-2 bg-red-500 text-white font-bold z-10",children:["-",o,"%"]}),0===s.stock&&e.jsx(oe,{className:"absolute top-2 right-2 bg-gray-500 text-white z-10",children:"Out of Stock"}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:e.jsx(je,{product:s,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white shadow-sm"})}),e.jsx(P,{to:`/product/${s.id}`,children:e.jsxs("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden group-hover:scale-105 transition-transform",children:[s.thumbnail||s.images[0]?e.jsx("img",{src:s.thumbnail||s.images[0],alt:s.title,className:"w-full h-full object-cover",onError:e=>{const s=e.target;s.style.display="none",s.nextElementSibling?.classList.remove("hidden")}}):null,e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500 text-sm",children:"Product Image"})]})}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[e.jsx(ce,{size:"sm",variant:"secondary",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsx(je,{product:s,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"}),e.jsx(We,{product:s,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(P,{to:`/product/${s.id}`,children:e.jsx("h3",{className:"font-medium mb-2 group-hover:text-orange-600 transition-colors line-clamp-2",children:s.title})}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",e.jsx("span",{className:"font-medium",children:s.brand})]}),m(s.rating),e.jsxs("div",{className:"mt-auto pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"amazon-price text-xl font-bold",children:d(s.price)}),s.originalPrice&&s.originalPrice>s.price&&e.jsx("span",{className:"text-gray-500 line-through text-sm",children:d(s.originalPrice)})]}),s.stock>0&&s.stock<=10&&e.jsxs("p",{className:"text-red-600 text-sm mb-2 font-medium",children:["Only ",s.stock," left in stock"]}),t&&e.jsx(ce,{onClick:n,disabled:i||0===s.stock,className:"w-full amazon-button",size:"sm",children:i?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):0===s.stock?"Out of Stock":"Add to Cart"})]})]})]})})},Je="ritkart_recently_viewed",Ke=()=>{const[e,s]=c.useState([]);c.useEffect(()=>{(()=>{try{const e=localStorage.getItem(Je);if(e){const a=JSON.parse(e);if(Array.isArray(a)){const e=a.sort((e,s)=>s.viewedAt-e.viewedAt).slice(0,12);s(e)}}}catch(e){localStorage.removeItem(Je)}})()},[]),c.useEffect(()=>{e.length>0&&localStorage.setItem(Je,JSON.stringify(e))},[e]);const a=c.useCallback(e=>{const a={id:e.id,name:e.name,title:e.title,price:e.price,originalPrice:e.originalPrice,brand:e.brand,thumbnail:e.thumbnail,images:e.images,rating:e.rating||e.averageRating||0,averageRating:e.averageRating,slug:e.slug,viewedAt:Date.now()};s(s=>{const t=s.filter(s=>s.id!==e.id);return[a,...t].slice(0,12)})},[]),t=c.useCallback(e=>{s(s=>s.filter(s=>s.id!==e))},[]),r=c.useCallback(()=>{s([]),localStorage.removeItem(Je)},[]),l=c.useCallback((s,a)=>{let t=e;return s&&(t=t.filter(e=>e.id!==s)),a&&(t=t.slice(0,a)),t},[e]),i=c.useCallback(s=>e.some(e=>e.id===s),[e]);return{recentlyViewedProducts:e,addToRecentlyViewed:a,removeFromRecentlyViewed:t,clearRecentlyViewed:r,getRecentlyViewed:l,isRecentlyViewed:i,recentlyViewedCount:e.length,maxRecentlyViewed:12}},Ye=({title:s="Recently Viewed",showTitle:a=!0,excludeProductId:t,limit:r=8,variant:l="horizontal",showClearAll:i=!0,className:c})=>{const{getRecentlyViewed:n,removeFromRecentlyViewed:d,clearRecentlyViewed:m,recentlyViewedCount:x}=Ke(),{addToCart:h,loading:g}=xe(),{isAuthenticated:u}=he(),p=n(t,r),f=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),N=s=>e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((a,t)=>e.jsx(A,{className:"w-3 h-3 "+(t<Math.floor(s)?"text-yellow-400 fill-current":t<s?"text-yellow-400 fill-current opacity-50":"text-gray-300")},t))}),b=async(e,s)=>{if(e.preventDefault(),e.stopPropagation(),u)try{const e={...s,stock:100,isActive:!0};await h(e,1)}catch(a){}},v=e=>!e.originalPrice||e.originalPrice<=e.price?0:Math.round((e.originalPrice-e.price)/e.originalPrice*100),y=e=>{const s=Date.now()-e,a=Math.floor(s/6e4),t=Math.floor(s/36e5),r=Math.floor(s/864e5);return a<60?`${a}m ago`:t<24?`${t}h ago`:`${r}d ago`};return 0===p.length?null:e.jsxs("div",{className:le("w-full",c),children:[a&&e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-6 h-6 text-gray-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s}),e.jsx(oe,{variant:"secondary",className:"ml-2",children:x})]}),i&&p.length>0&&e.jsxs(ce,{variant:"ghost",size:"sm",onClick:m,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Clear All"]})]}),"horizontal"===l?e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide",children:p.map(s=>e.jsx(ge,{className:"flex-shrink-0 w-64 group",children:e.jsxs(ue,{className:"p-4",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("button",{onClick:e=>{e.preventDefault(),d(s.id)},className:"absolute -top-2 -right-2 p-1 rounded-full bg-gray-100 hover:bg-red-100 text-gray-500 hover:text-red-600 transition-colors z-10",children:e.jsx(o,{className:"w-3 h-3"})}),e.jsx(P,{to:`/product/${s.id}`,children:e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden group-hover:scale-105 transition-transform",children:s.thumbnail||s.images[0]?e.jsx("img",{src:s.thumbnail||s.images[0],alt:s.name||s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500 text-sm",children:"No Image"})})}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[e.jsx(P,{to:`/product/${s.id}`,children:e.jsx(ce,{size:"sm",variant:"secondary",children:e.jsx(z,{className:"w-4 h-4"})})}),e.jsx(je,{product:s,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"}),e.jsx(We,{product:s,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"})]})]}),e.jsx(P,{to:`/product/${s.id}`,children:e.jsx("h3",{className:"font-medium text-sm mb-2 group-hover:text-blue-600 transition-colors line-clamp-2",children:s.name||s.title})}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:s.brand}),N(s.rating),e.jsxs("div",{className:"flex items-center gap-2 mt-2 mb-3",children:[e.jsx("span",{className:"font-bold text-blue-600",children:f(s.price)}),s.originalPrice&&s.originalPrice>s.price&&e.jsx("span",{className:"text-gray-500 line-through text-sm",children:f(s.originalPrice)}),v(s)>0&&e.jsxs(oe,{className:"bg-red-500 text-white text-xs",children:["-",v(s),"%"]})]}),e.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:e.jsxs("span",{children:["Viewed ",y(s.viewedAt)]})}),e.jsx(ce,{onClick:e=>b(e,s),disabled:g,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:g?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})})]})},s.id))}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:p.map(s=>e.jsx(ge,{className:"group",children:e.jsxs(ue,{className:"p-4",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("button",{onClick:e=>{e.preventDefault(),d(s.id)},className:"absolute -top-2 -right-2 p-1 rounded-full bg-gray-100 hover:bg-red-100 text-gray-500 hover:text-red-600 transition-colors z-10",children:e.jsx(o,{className:"w-3 h-3"})}),e.jsx(P,{to:`/product/${s.id}`,children:e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden group-hover:scale-105 transition-transform",children:s.thumbnail||s.images[0]?e.jsx("img",{src:s.thumbnail||s.images[0],alt:s.name||s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500 text-sm",children:"No Image"})})})]}),e.jsx(P,{to:`/product/${s.id}`,children:e.jsx("h3",{className:"font-medium text-sm mb-2 group-hover:text-blue-600 transition-colors line-clamp-2",children:s.name||s.title})}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:s.brand}),N(s.rating),e.jsxs("div",{className:"flex items-center gap-2 mt-2 mb-2",children:[e.jsx("span",{className:"font-bold text-blue-600",children:f(s.price)}),s.originalPrice&&s.originalPrice>s.price&&e.jsx("span",{className:"text-gray-500 line-through text-sm",children:f(s.originalPrice)})]}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Viewed ",y(s.viewedAt)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{onClick:e=>b(e,s),disabled:g,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx(je,{product:s,size:"sm",variant:"outline"}),e.jsx(We,{product:s,size:"sm",variant:"outline"})]})]})},s.id))})]})};function Ze({className:s,defaultValue:a,value:t,min:r=0,max:l=100,...i}){const n=c.useMemo(()=>Array.isArray(t)?t:Array.isArray(a)?a:[r,l],[t,a,r,l]);return e.jsxs($,{"data-slot":"slider",defaultValue:a,value:t,min:r,max:l,className:le("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...i,children:[e.jsx(O,{"data-slot":"slider-track",className:le("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(M,{"data-slot":"slider-range",className:le("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:n.length},(s,a)=>e.jsx(I,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},a))]})}const Xe=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[s,a]=D();n();const{addItem:t}=xe(),[r,l]=c.useState([]),[i,d]=c.useState([]),[x,h]=c.useState([]),[g,u]=c.useState(!0),[j,p]=c.useState("grid"),[f,N]=c.useState("featured"),[b,v]=c.useState(s.get("search")||""),[y,w]=c.useState(!1),[k,S]=c.useState({categories:s.get("category")?[s.get("category")]:[],brands:[],priceRange:[0,2e3],rating:0,inStock:!1}),[C,z]=c.useState(1),[F,$]=c.useState([]);c.useEffect(()=>{(async()=>{try{u(!0);const[e,s]=await Promise.all([ie.getAllProducts({page:0,size:100}),de.getAllCategories()]);if(e.success){l(e.data.content||[]);const s=Array.from(new Set(e.data.content?.map(e=>e.brand).filter(Boolean)||[]));$(s)}s.success&&d(s.data||[])}catch(e){L.error("Failed to load products")}finally{u(!1)}})()},[]);const O=c.useMemo(()=>{let e=[...r];if(b){const s=b.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.brand.toLowerCase().includes(s))}switch(k.categories.length>0&&(e=e.filter(e=>k.categories.includes(e.category.id))),k.brands.length>0&&(e=e.filter(e=>k.brands.includes(e.brand))),e=e.filter(e=>e.price>=k.priceRange[0]&&e.price<=k.priceRange[1]),k.rating>0&&(e=e.filter(e=>e.rating>=k.rating)),k.inStock&&(e=e.filter(e=>e.stock>0)),f){case"price-low":e.sort((e,s)=>e.price-s.price);break;case"price-high":e.sort((e,s)=>s.price-e.price);break;case"rating":e.sort((e,s)=>s.rating-e.rating);break;case"newest":e.sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime());break;case"name":e.sort((e,s)=>e.title.localeCompare(s.title));break;default:e.sort((e,s)=>(s.isFeatured?1:0)-(e.isFeatured?1:0))}return e},[r,b,k,f]),M=c.useMemo(()=>{const e=20*(C-1);return O.slice(e,e+20)},[O,C]),I=Math.ceil(O.length/20);c.useEffect(()=>{const e=new URLSearchParams;b&&e.set("search",b),k.categories.length>0&&e.set("category",k.categories[0]),"featured"!==f&&e.set("sort",f),a(e)},[b,k.categories,f,a]);const q=()=>{S({categories:[],brands:[],priceRange:[0,2e3],rating:0,inStock:!1}),v(""),z(1)},U=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Price Range"}),e.jsxs("div",{className:"px-3",children:[e.jsx(Ze,{value:k.priceRange,onValueChange:e=>S(s=>({...s,priceRange:e})),max:2e3,step:10,className:"mb-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["$",k.priceRange[0]]}),e.jsxs("span",{children:["$",k.priceRange[1]]})]})]})]}),e.jsx(pe,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Categories"}),e.jsx("div",{className:"space-y-2",children:i.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:`category-${s.id}`,checked:k.categories.includes(s.id),onCheckedChange:e=>{S(e?e=>({...e,categories:[...e.categories,s.id]}):e=>({...e,categories:e.categories.filter(e=>e!==s.id)}))}}),e.jsx("label",{htmlFor:`category-${s.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:s.name})]},s.id))})]}),e.jsx(pe,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Brands"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:F.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:`brand-${s}`,checked:k.brands.includes(s),onCheckedChange:e=>{S(e?e=>({...e,brands:[...e.brands,s]}):e=>({...e,brands:e.brands.filter(e=>e!==s)}))}}),e.jsx("label",{htmlFor:`brand-${s}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:s})]},s))})]}),e.jsx(pe,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Customer Rating"}),e.jsx("div",{className:"space-y-2",children:[4,3,2,1].map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:`rating-${s}`,checked:k.rating===s,onCheckedChange:e=>{S(a=>({...a,rating:e?s:0}))}}),e.jsxs("label",{htmlFor:`rating-${s}`,className:"flex items-center text-sm",children:[e.jsx("div",{className:"flex items-center mr-1",children:[...Array(5)].map((a,t)=>e.jsx(A,{className:"w-4 h-4 "+(t<s?"text-orange-400 fill-current":"text-gray-300")},t))}),"& Up"]})]},s))})]}),e.jsx(pe,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Availability"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"in-stock",checked:k.inStock,onCheckedChange:e=>{S(s=>({...s,inStock:e}))}}),e.jsx("label",{htmlFor:"in-stock",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"In Stock Only"})]})]}),e.jsx(ce,{variant:"outline",onClick:q,className:"w-full",children:"Clear All Filters"})]});return g?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((s,a)=>e.jsx("div",{className:"h-24 bg-gray-200 rounded"},a))})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(9)].map((s,a)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},a))})})]})}):e.jsx("div",{className:"bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),z(1)},className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(ne,{type:"text",placeholder:"Search products...",value:b,onChange:e=>v(e.target.value),className:"pl-10 h-12"})]}),e.jsx(ce,{type:"submit",className:"h-12 px-6 amazon-button",children:"Search"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(ge,{className:"sticky top-4",children:e.jsxs(ue,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),e.jsx(V,{className:"w-5 h-5"})]}),e.jsx(U,{})]})})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:b?`Search results for "${b}"`:"All Products"}),e.jsxs("p",{className:"text-gray-600",children:[O.length," product",1!==O.length?"s":""," found"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(_e,{open:y,onOpenChange:w,children:[e.jsx(Te,{asChild:!0,children:e.jsxs(ce,{variant:"outline",className:"lg:hidden",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Filters"]})}),e.jsxs(Le,{side:"left",className:"w-80",children:[e.jsxs(qe,{children:[e.jsx(Ue,{children:"Filters"}),e.jsx(He,{children:"Filter products by your preferences"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(U,{})})]})]}),e.jsxs("div",{className:"flex border rounded-lg",children:[e.jsx(ce,{variant:"grid"===j?"default":"ghost",size:"sm",onClick:()=>p("grid"),className:"rounded-r-none",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx(ce,{variant:"list"===j?"default":"ghost",size:"sm",onClick:()=>p("list"),className:"rounded-l-none",children:e.jsx(E,{className:"w-4 h-4"})})]}),e.jsxs(Pe,{value:f,onValueChange:N,children:[e.jsx(Re,{className:"w-48",children:e.jsx(ze,{placeholder:"Sort by"})}),e.jsxs(Ae,{children:[e.jsx(Fe,{value:"featured",children:"Featured"}),e.jsx(Fe,{value:"price-low",children:"Price: Low to High"}),e.jsx(Fe,{value:"price-high",children:"Price: High to Low"}),e.jsx(Fe,{value:"rating",children:"Customer Rating"}),e.jsx(Fe,{value:"newest",children:"Newest First"}),e.jsx(Fe,{value:"name",children:"Name A-Z"})]})]})]})]}),(k.categories.length>0||k.brands.length>0||k.rating>0||k.inStock)&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[k.categories.map(s=>{const a=i.find(e=>e.id===s);return a?e.jsxs(oe,{variant:"secondary",className:"flex items-center gap-1",children:[a.name,e.jsx(o,{className:"w-3 h-3 cursor-pointer",onClick:()=>S(e=>({...e,categories:e.categories.filter(e=>e!==s)}))})]},s):null}),k.brands.map(s=>e.jsxs(oe,{variant:"secondary",className:"flex items-center gap-1",children:[s,e.jsx(o,{className:"w-3 h-3 cursor-pointer",onClick:()=>S(e=>({...e,brands:e.brands.filter(e=>e!==s)}))})]},s)),k.rating>0&&e.jsxs(oe,{variant:"secondary",className:"flex items-center gap-1",children:[k.rating,"+ Stars",e.jsx(o,{className:"w-3 h-3 cursor-pointer",onClick:()=>S(e=>({...e,rating:0}))})]}),k.inStock&&e.jsxs(oe,{variant:"secondary",className:"flex items-center gap-1",children:["In Stock",e.jsx(o,{className:"w-3 h-3 cursor-pointer",onClick:()=>S(e=>({...e,inStock:!1}))})]})]}),0===M.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(m,{className:"w-12 h-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search or filter criteria"}),e.jsx(ce,{onClick:q,variant:"outline",children:"Clear all filters"})]}):e.jsxs(e.Fragment,{children:["grid"===j?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(s=>e.jsx(Qe,{product:s},s.id))}):e.jsx("div",{className:"space-y-4",children:M.map(s=>e.jsx(ge,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:e.jsx(ue,{className:"p-0",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-48 h-48 bg-gray-100 flex-shrink-0",children:e.jsx("img",{src:s.thumbnail||"/api/placeholder/200/200",alt:s.title,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(P,{to:`/product/${s.id}`,children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 hover:text-orange-600 transition-colors mb-2",children:s.title})}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((a,t)=>e.jsx(A,{className:"w-4 h-4 "+(t<Math.floor(s.rating)?"text-orange-400 fill-current":"text-gray-300")},t))}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",s.reviewCount,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",s.price]}),s.originalPrice&&s.originalPrice>s.price&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["$",s.originalPrice]}),e.jsxs(oe,{variant:"destructive",children:[Math.round((s.originalPrice-s.price)/s.originalPrice*100),"% off"]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsxs(ce,{onClick:()=>(async e=>{try{await t(e.id,1),L.success(`${e.title} added to cart`)}catch(s){L.error("Failed to add item to cart")}})(s),className:"amazon-button",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Add to Cart"]}),e.jsx(ce,{variant:"outline",size:"sm",children:e.jsx(B,{className:"w-4 h-4"})})]})]})})]})})},s.id))}),I>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-8",children:[e.jsx(ce,{variant:"outline",onClick:()=>z(e=>Math.max(1,e-1)),disabled:1===C,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:[...Array(Math.min(5,I))].map((s,a)=>{const t=C<=3?a+1:C-2+a;return t>I?null:e.jsx(ce,{variant:C===t?"default":"outline",size:"sm",onClick:()=>z(t),children:t},t)})}),e.jsx(ce,{variant:"outline",onClick:()=>z(e=>Math.min(I,e+1)),disabled:C===I,children:"Next"})]})]})]})]})]})})}},Symbol.toStringTag,{value:"Module"}));function Ge({className:s,value:a,...t}){return e.jsx(q,{"data-slot":"progress",className:le("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...t,children:e.jsx(U,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}function es({className:s,...a}){return e.jsx("textarea",{"data-slot":"textarea",className:le("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...a})}const ss=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{id:s}=H(),a=n(),{addItem:t}=xe(),{user:r,isAuthenticated:l}=he(),{addToRecentlyViewed:i}=Ke(),[d,m]=c.useState(null),[x,h]=c.useState([]),[g,u]=c.useState([]),[j,p]=c.useState(!0),[f,N]=c.useState(1),[b,v]=c.useState(0),[y,w]=c.useState(!1),[k,S]=c.useState(!1),[C,z]=c.useState(5),[F,$]=c.useState(""),[O,M]=c.useState(!1),[I,D]=c.useState(""),[V,_]=c.useState("");c.useEffect(()=>{if(!s)return;(async()=>{try{p(!0);const[e,a]=await Promise.all([ie.getProductById(s),Se.getProductReviews(s,{page:0,size:10})]);if(e.success&&(m(e.data),i(e.data),e.data.category?.id)){const a=await ie.getAllProducts({page:0,size:4,categoryId:e.data.category.id});if(a.success){const e=a.data.content?.filter(e=>e.id!==s)||[];u(e.slice(0,4))}}a.success&&h(a.data.content||[])}catch(e){L.error("Failed to load product details"),a("/products")}finally{p(!1)}})()},[s,a]);if(j)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[...Array(4)].map((s,a)=>e.jsx("div",{className:"aspect-square bg-gray-200 rounded"},a))})]}),e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]})});if(!d)return e.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Product Not Found"}),e.jsx(P,{to:"/products",children:e.jsx(ce,{children:"Back to Products"})})]});const T=d.originalPrice?Math.round((d.originalPrice-d.price)/d.originalPrice*100):0,E=x.length>0?x.reduce((e,s)=>e+s.rating,0)/x.length:d.rating,q=[5,4,3,2,1].map(e=>({rating:e,count:x.filter(s=>s.rating===e).length,percentage:x.length>0?x.filter(s=>s.rating===e).length/x.length*100:0}));return e.jsxs("div",{className:"bg-white",children:[e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("nav",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(P,{to:"/",className:"hover:text-orange-600",children:"Home"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(P,{to:"/products",className:"hover:text-orange-600",children:"Products"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(P,{to:`/products?category=${d.category.id}`,className:"hover:text-orange-600",children:d.category.name}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-900",children:d.title})]})}),e.jsxs("div",{className:"container mx-auto px-4 pb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4",children:[e.jsx("img",{src:d.images[b]||d.thumbnail||"/api/placeholder/600/600",alt:d.title,className:"w-full h-full object-cover"}),d.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{d&&v(e=>0===e?d.images.length-1:e-1)},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-2 shadow-lg transition-colors",children:e.jsx(W,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>{d&&v(e=>e===d.images.length-1?0:e+1)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-2 shadow-lg transition-colors",children:e.jsx(Q,{className:"w-6 h-6"})})]}),d.discount&&e.jsxs(oe,{className:"absolute top-4 left-4 bg-red-500 text-white font-bold",children:[T,"% OFF"]})]}),d.images.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-2",children:d.images.map((s,a)=>e.jsx("button",{onClick:()=>v(a),className:"aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 transition-colors "+(b===a?"border-orange-500":"border-transparent"),children:e.jsx("img",{src:s||"/api/placeholder/150/150",alt:`${d.title} ${a+1}`,className:"w-full h-full object-cover"})},a))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:d.title}),e.jsx("p",{className:"text-lg text-gray-600 mb-4",children:d.shortDescription}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((s,a)=>e.jsx(A,{className:"w-5 h-5 "+(a<Math.floor(E)?"text-orange-400 fill-current":"text-gray-300")},a)),e.jsx("span",{className:"text-lg font-medium ml-2",children:E.toFixed(1)})]}),e.jsxs("span",{className:"text-blue-600 hover:underline cursor-pointer",children:["(",x.length," reviews)"]}),e.jsxs(oe,{variant:"outline",children:["Brand: ",d.brand]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("span",{className:"text-3xl font-bold text-red-600",children:["$",d.price]}),d.originalPrice&&d.originalPrice>d.price&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-xl text-gray-500 line-through",children:["$",d.originalPrice]}),e.jsxs(oe,{variant:"destructive",className:"text-lg px-3 py-1",children:["Save $",(d.originalPrice-d.price).toFixed(2)]})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:d.stock>0?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["In Stock (",d.stock," available)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Out of Stock"})]})}),d.stock>0&&e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("span",{className:"font-medium",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center border rounded-lg",children:[e.jsx("button",{onClick:()=>N(Math.max(1,f-1)),className:"p-2 hover:bg-gray-100 transition-colors",disabled:f<=1,children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx(ne,{type:"number",value:f,onChange:e=>N(Math.max(1,Math.min(d.stock,parseInt(e.target.value)||1))),className:"w-16 text-center border-0 focus:ring-0",min:1,max:d.stock}),e.jsx("button",{onClick:()=>N(Math.min(d.stock,f+1)),className:"p-2 hover:bg-gray-100 transition-colors",disabled:f>=d.stock,children:e.jsx(Y,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ce,{onClick:async()=>{if(d)try{await t(d.id,f),L.success(`${f} ${d.title}(s) added to cart`)}catch(e){L.error("Failed to add item to cart")}},disabled:0===d.stock,className:"flex-1 h-12 amazon-button text-lg",children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),"Add to Cart"]}),e.jsx(ce,{variant:"outline",onClick:()=>w(!y),className:"h-12 px-4",children:e.jsx(B,{className:"w-5 h-5 "+(y?"fill-current text-red-500":"")})})]}),e.jsx(ce,{onClick:async()=>{if(d)try{await t(d.id,f),a("/cart")}catch(e){L.error("Failed to add item to cart")}},disabled:0===d.stock,className:"w-full h-12 bg-orange-500 hover:bg-orange-600 text-white text-lg",children:"Buy Now"}),e.jsxs(ce,{variant:"outline",className:"w-full h-12",children:[e.jsx(Z,{className:"w-5 h-5 mr-2"}),"Share"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[e.jsx(X,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Free Delivery"}),e.jsx("div",{className:"text-sm text-gray-600",children:"On orders over $50"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[e.jsx(G,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Easy Returns"}),e.jsx("div",{className:"text-sm text-gray-600",children:"30-day return policy"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[e.jsx(ee,{className:"w-6 h-6 text-purple-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Warranty"}),e.jsx("div",{className:"text-sm text-gray-600",children:"2-year protection"})]})]})]})]})]}),e.jsxs(fe,{defaultValue:"description",className:"mb-12",children:[e.jsxs(Ne,{className:"grid w-full grid-cols-4",children:[e.jsx(be,{value:"description",children:"Description"}),e.jsx(be,{value:"specifications",children:"Specifications"}),e.jsxs(be,{value:"reviews",children:["Reviews (",x.length,")"]}),e.jsx(be,{value:"qa",children:"Q&A"})]}),e.jsx(ve,{value:"description",className:"mt-6",children:e.jsx(ge,{children:e.jsxs(ue,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Product Description"}),e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:d.description}),d.features&&d.features.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Key Features:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:d.features.map((s,a)=>e.jsx("li",{className:"text-gray-700",children:s},a))})]})]})]})})}),e.jsx(ve,{value:"specifications",className:"mt-6",children:e.jsx(ge,{children:e.jsxs(ue,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Specifications"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx("div",{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium",children:"Brand"}),e.jsx("span",{children:d.brand})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium",children:"SKU"}),e.jsx("span",{children:d.sku})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium",children:"Category"}),e.jsx("span",{children:d.category.name})]}),Object.entries(d.specifications||{}).map(([s,a])=>e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium capitalize",children:s.replace(/([A-Z])/g," $1")}),e.jsx("span",{children:a})]},s))]})})})]})})}),e.jsx(ve,{value:"reviews",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx(ge,{children:e.jsxs(ue,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Customer Reviews"}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:E.toFixed(1)}),e.jsx("div",{className:"flex justify-center mb-2",children:[...Array(5)].map((s,a)=>e.jsx(A,{className:"w-6 h-6 "+(a<Math.floor(E)?"text-orange-400 fill-current":"text-gray-300")},a))}),e.jsxs("div",{className:"text-gray-600",children:[x.length," reviews"]})]}),e.jsx("div",{className:"space-y-2",children:q.map(({rating:s,count:a,percentage:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm w-8",children:s}),e.jsx(A,{className:"w-4 h-4 text-orange-400 fill-current"}),e.jsx(Ge,{value:t,className:"flex-1"}),e.jsx("span",{className:"text-sm text-gray-600 w-8",children:a})]},s))}),l&&e.jsx(ce,{onClick:()=>S(!k),className:"w-full mt-4",variant:"outline",children:"Write a Review"})]})}),k&&l&&e.jsx(ge,{className:"mt-4",children:e.jsxs(ue,{className:"p-6",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Write Your Review"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rating"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>e.jsx("button",{onClick:()=>z(s),className:"transition-colors",children:e.jsx(A,{className:"w-6 h-6 "+(s<=C?"text-orange-400 fill-current":"text-gray-300")})},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Review"}),e.jsx(es,{value:F,onChange:e=>$(e.target.value),placeholder:"Share your experience with this product...",rows:4})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{onClick:async()=>{if(d&&l){M(!0);try{if((await Se.createReview({productId:d.id,rating:C,comment:F})).success){L.success("Review submitted successfully"),S(!1),$(""),z(5);const e=await Se.getProductReviews(d.id,{page:0,size:10});e.success&&h(e.data.content||[])}}catch(e){L.error("Failed to submit review")}finally{M(!1)}}},disabled:O||!F.trim(),children:O?"Submitting...":"Submit Review"}),e.jsx(ce,{variant:"outline",onClick:()=>S(!1),children:"Cancel"})]})]})]})})]}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:0===x.length?e.jsx(ge,{children:e.jsxs(ue,{className:"p-8 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(A,{className:"w-12 h-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No reviews yet"}),e.jsx("p",{className:"text-gray-600",children:"Be the first to review this product!"})]})}):x.map(s=>e.jsx(ge,{children:e.jsx(ue,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(ye,{children:[e.jsx(we,{src:s.user?.profilePicture}),e.jsxs(ke,{children:[s.user?.firstName?.[0],s.user?.lastName?.[0]]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"font-medium",children:[s.user?.firstName," ",s.user?.lastName]}),s.user?.isVerified&&e.jsx(se,{className:"w-4 h-4 text-blue-500"}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((a,t)=>e.jsx(A,{className:"w-4 h-4 "+(t<s.rating?"text-orange-400 fill-current":"text-gray-300")},t))}),e.jsx("span",{className:"text-sm text-gray-600",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:s.comment}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("button",{className:"flex items-center gap-1 hover:text-gray-900",children:[e.jsx(ae,{className:"w-4 h-4"}),"Helpful (",s.helpfulCount||0,")"]}),e.jsxs("button",{className:"flex items-center gap-1 hover:text-gray-900",children:[e.jsx(te,{className:"w-4 h-4"}),"Not helpful"]})]})]})]})})},s.id))})]})}),e.jsx(ve,{value:"qa",className:"mt-6",children:e.jsx(ge,{children:e.jsxs(ue,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Questions & Answers"}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(re,{className:"w-12 h-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No questions yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Be the first to ask a question about this product!"}),l&&e.jsx(ce,{children:"Ask a Question"})]})]})})})]}),g.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Related Products"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map(s=>e.jsx(Qe,{product:s},s.id))})]}),e.jsx(Ye,{excludeProductId:d?.id,title:"Your Recently Viewed Items",limit:6,variant:"horizontal",className:"mb-8"})]})]})}},Symbol.toStringTag,{value:"Module"})),as=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[s,a]=D(),[t,r]=c.useState([]),[l,i]=c.useState(0),[n,d]=c.useState(!1),[m,h]=c.useState("grid"),[g,u]=c.useState("relevance"),[j,p]=c.useState("desc"),[f,N]=c.useState(1),[b,v]=c.useState([]),[y,w]=c.useState([]),[k,S]=c.useState(!1),[C,P]=c.useState({categories:[],brands:[],minPrice:0,maxPrice:1e4,minRating:0,hasDiscount:!1,inStockOnly:!0,freeShipping:!1}),[R,z]=c.useState([]),F=s.get("q")||"",$=s.get("category")||"";c.useEffect(()=>{(async()=>{try{const[e]=await Promise.all([de.getCategories()]);v(e)}catch(e){}})()},[]),c.useEffect(()=>{O()},[F,$,C,g,j,f]);const O=async()=>{if(F||$){d(!0);try{const e=$?[$]:C.categories,s=await ie.advancedSearch({q:F||void 0,categories:e.length>0?e:void 0,brands:C.brands.length>0?C.brands:void 0,minPrice:C.minPrice>0?C.minPrice:void 0,maxPrice:C.maxPrice<1e4?C.maxPrice:void 0,minRating:C.minRating>0?C.minRating:void 0,hasDiscount:C.hasDiscount,inStockOnly:C.inStockOnly,freeShipping:C.freeShipping,page:f-1,size:20,sortBy:g,sortDir:j});r(s.content),i(s.totalElements);const a=[...new Set(s.content.map(e=>e.brand).filter(Boolean))];w(a)}catch(e){r([]),i(0)}d(!1)}};c.useEffect(()=>{(()=>{const e=[];C.categories.length>0&&e.push(`Categories: ${C.categories.join(", ")}`),C.brands.length>0&&e.push(`Brands: ${C.brands.join(", ")}`),(C.minPrice>0||C.maxPrice<1e4)&&e.push(`Price: $${C.minPrice} - $${C.maxPrice}`),C.minRating>0&&e.push(`Rating: ${C.minRating}+ stars`),C.hasDiscount&&e.push("On Sale"),C.inStockOnly||e.push("Include Out of Stock"),C.freeShipping&&e.push("Free Shipping"),z(e)})()},[C]);const M=()=>{P({categories:[],brands:[],minPrice:0,maxPrice:1e4,minRating:0,hasDiscount:!1,inStockOnly:!0,freeShipping:!1}),N(1)},I=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Categories"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:b.map(s=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{checked:C.categories.includes(s.id),onCheckedChange:e=>{P(e?e=>({...e,categories:[...e.categories,s.id]}):e=>({...e,categories:e.categories.filter(e=>e!==s.id)})),N(1)}}),e.jsx("span",{className:"text-sm",children:s.name})]},s.id))})]}),e.jsx(pe,{}),y.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Brands"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:y.map(s=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{checked:C.brands.includes(s),onCheckedChange:e=>{P(e?e=>({...e,brands:[...e.brands,s]}):e=>({...e,brands:e.brands.filter(e=>e!==s)})),N(1)}}),e.jsx("span",{className:"text-sm",children:s})]},s))})]}),e.jsx(pe,{})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Price Range"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{type:"number",placeholder:"Min",value:C.minPrice||"",onChange:e=>{P(s=>({...s,minPrice:parseInt(e.target.value)||0}))},className:"w-20"}),e.jsx("span",{children:"to"}),e.jsx(ne,{type:"number",placeholder:"Max",value:C.maxPrice||"",onChange:e=>{P(s=>({...s,maxPrice:parseInt(e.target.value)||1e4}))},className:"w-20"})]}),e.jsx(Ze,{value:[C.minPrice,C.maxPrice],onValueChange:([e,s])=>{P(a=>({...a,minPrice:e,maxPrice:s}))},max:1e4,step:10,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:["$",C.minPrice]}),e.jsxs("span",{children:["$",C.maxPrice]})]})]})]}),e.jsx(pe,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Customer Rating"}),e.jsx("div",{className:"space-y-2",children:[4,3,2,1].map(s=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{checked:C.minRating===s,onCheckedChange:e=>{P(a=>({...a,minRating:e?s:0})),N(1)}}),e.jsxs("div",{className:"flex items-center",children:[[...Array(s)].map((s,a)=>e.jsx(A,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},a)),e.jsx("span",{className:"ml-2 text-sm",children:"& Up"})]})]},s))})]}),e.jsx(pe,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{checked:C.hasDiscount,onCheckedChange:e=>{P(s=>({...s,hasDiscount:e})),N(1)}}),e.jsx("span",{className:"text-sm",children:"On Sale"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{checked:C.inStockOnly,onCheckedChange:e=>{P(s=>({...s,inStockOnly:e})),N(1)}}),e.jsx("span",{className:"text-sm",children:"In Stock Only"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{checked:C.freeShipping,onCheckedChange:e=>{P(s=>({...s,freeShipping:e})),N(1)}}),e.jsx("span",{className:"text-sm",children:"Free Shipping"})]})]})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx(Ve,{onSearch:e=>{const t=new URLSearchParams(s);e?t.set("q",e):t.delete("q"),a(t),N(1)},placeholder:`Search for "${F}"`})})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Search Results"}),F&&e.jsxs("p",{className:"text-gray-600",children:['Showing results for "',e.jsx("span",{className:"font-semibold",children:F}),'"',l>0&&` (${l.toLocaleString()} products)`]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(ce,{variant:"grid"===m?"default":"ghost",size:"sm",onClick:()=>h("grid"),className:"rounded-r-none",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx(ce,{variant:"list"===m?"default":"ghost",size:"sm",onClick:()=>h("list"),className:"rounded-l-none",children:e.jsx(E,{className:"w-4 h-4"})})]}),e.jsxs(Pe,{value:`${g}-${j}`,onValueChange:e=>{const[s,a]=e.split("-");u(s),p(a),N(1)},children:[e.jsx(Re,{className:"w-48",children:e.jsx(ze,{})}),e.jsxs(Ae,{children:[e.jsx(Fe,{value:"relevance-desc",children:"Most Relevant"}),e.jsx(Fe,{value:"price-asc",children:"Price: Low to High"}),e.jsx(Fe,{value:"price-desc",children:"Price: High to Low"}),e.jsx(Fe,{value:"averageRating-desc",children:"Highest Rated"}),e.jsx(Fe,{value:"totalSales-desc",children:"Best Selling"}),e.jsx(Fe,{value:"createdAt-desc",children:"Newest First"})]})]}),e.jsxs(_e,{open:k,onOpenChange:S,children:[e.jsx(Te,{asChild:!0,children:e.jsxs(ce,{variant:"outline",className:"md:hidden",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Filters"]})}),e.jsxs(Le,{side:"left",className:"w-80",children:[e.jsxs(qe,{children:[e.jsx(Ue,{children:"Filters"}),e.jsx(He,{children:"Refine your search results"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(I,{})})]})]})]})]}),R.length>0&&e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Filters:"}),R.map((s,a)=>e.jsxs(oe,{variant:"secondary",className:"cursor-pointer hover:bg-red-100",onClick:()=>{return(e=s).startsWith("Categories:")?P(e=>({...e,categories:[]})):e.startsWith("Brands:")?P(e=>({...e,brands:[]})):e.startsWith("Price:")?P(e=>({...e,minPrice:0,maxPrice:1e4})):e.startsWith("Rating:")?P(e=>({...e,minRating:0})):"On Sale"===e?P(e=>({...e,hasDiscount:!1})):"Include Out of Stock"===e?P(e=>({...e,inStockOnly:!0})):"Free Shipping"===e&&P(e=>({...e,freeShipping:!1})),void N(1);var e},children:[s,e.jsx(o,{className:"w-3 h-3 ml-1"})]},a)),e.jsx(ce,{variant:"ghost",size:"sm",onClick:M,className:"text-red-600 hover:text-red-700",children:"Clear all"})]})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("aside",{className:"hidden md:block w-64 flex-shrink-0",children:e.jsx(ge,{children:e.jsxs(ue,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"font-semibold",children:"Filters"}),e.jsx(ce,{variant:"ghost",size:"sm",onClick:M,className:"text-sm",children:"Clear all"})]}),e.jsx(I,{})]})})}),e.jsx("main",{className:"flex-1",children:n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})}):0===t.length?e.jsx(ge,{children:e.jsxs(ue,{className:"p-12 text-center",children:[e.jsx(x,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search terms or filters"}),e.jsx(ce,{onClick:M,children:"Clear filters"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`\n                  ${"grid"===m?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4"}\n                `,children:t.map(s=>e.jsx(Qe,{product:s,variant:m},s.id))}),l>20&&e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2",children:[e.jsx(ce,{variant:"outline",disabled:1===f,onClick:()=>N(e=>Math.max(1,e-1)),children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,Math.ceil(l/20))},(s,a)=>{const t=a+1;return e.jsx(ce,{variant:f===t?"default":"outline",size:"sm",onClick:()=>N(t),children:t},t)})}),e.jsx(ce,{variant:"outline",disabled:f>=Math.ceil(l/20),onClick:()=>N(e=>e+1),children:"Next"})]})]})})]})]})]})}},Symbol.toStringTag,{value:"Module"}));export{$e as D,Qe as P,Ye as R,Ve as S,Oe as a,Me as b,De as c,Ie as d,_e as e,Te as f,Le as g,qe as h,Ue as i,He as j,Xe as k,ss as l,as as m};
