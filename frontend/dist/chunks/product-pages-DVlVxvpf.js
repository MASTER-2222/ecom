import{j as e,R as st,T as tt,g as at,C as rt,I as nt,h as it,S as lt,i as ot,k as ct,l as dt,m as mt,n as ut,D as ht,o as xt,O as gt,u as Je,c as Ne,p as ft,d as se,P as G,b as ne,q as Qe,r as Xe,f as pt,e as vt,s as jt,t as bt,v as Nt,V as yt,w as wt,x as St,y as Ct,z as Pt,A as kt,B as Rt,E as At,F as It,G as Ft,H as Ze,J as _t,K as Dt,a as $t,L as Tt,M as ke}from"./ui-vendor-DCecdomg.js";import{r as l,u as De,L as q,f as es,h as zt}from"./react-vendor-ChmzT23k.js";import{c as _,a as Et,p as re,B as R,C as $e,I as ue,X,S as de,b as Te,P as Re,d as We,T as Ke,H as He,e as Ae,f as Mt,u as ie,g as oe,h as M,w as ce,V as U,i as ve,j as Lt,k as W,l as K,m as he,E as ss,n as Q,o as Vt,q as ts,r as Bt,s as Ot,F as as,G as rs,L as ns,t as te,v as Z,x as Wt,y as Kt,M as Ht,z as Ut,A as qt,D as Gt,R as Yt,J as Jt,K as Qt,N as Xt,O as Zt,U as ea,Q as Ce}from"./auth-pages-aJgSGeUe.js";import{r as sa}from"./chart-vendor-DroWEYyZ.js";function ta({...s}){return e.jsx(st,{"data-slot":"dropdown-menu",...s})}function aa({...s}){return e.jsx(tt,{"data-slot":"dropdown-menu-trigger",...s})}function ra({className:s,sideOffset:t=4,...i}){return e.jsx(at,{children:e.jsx(rt,{"data-slot":"dropdown-menu-content",sideOffset:t,className:_("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...i})})}function Ue({className:s,inset:t,variant:i="default",...r}){return e.jsx(nt,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":i,className:_("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r})}function jr({className:s,...t}){return e.jsx(it,{"data-slot":"dropdown-menu-separator",className:_("bg-border -mx-1 my-1 h-px",s),...t})}const na=Et("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function H({className:s,variant:t,asChild:i=!1,...r}){const c=i?lt:"span";return e.jsx(c,{"data-slot":"badge",className:_(na({variant:t}),s),...r})}const ia=({onSearch:s,placeholder:t="Search RitKART",className:i=""})=>{const[r,c]=l.useState(""),[h,a]=l.useState("All"),[u,x]=l.useState([]),[g,j]=l.useState(!1),[f,y]=l.useState([]),[b,p]=l.useState(null),[v,w]=l.useState([]),[k,E]=l.useState([]),[S,d]=l.useState(!1),D=De(),N=l.useRef(null),A=l.useRef(null),L=l.useRef();l.useEffect(()=>{(async()=>{try{const[B,O]=await Promise.all([Te.getCategories(),re.getPopularSearchTerms(8)]);x(B),w(O)}catch(B){console.error("Failed to load initial search data:",B)}})();const $=localStorage.getItem("ritkart_recent_searches");$&&E(JSON.parse($))},[]),l.useEffect(()=>(L.current&&clearTimeout(L.current),r.trim().length>=2?L.current=setTimeout(async()=>{d(!0);try{const[P,$]=await Promise.all([re.getSearchSuggestions(r,8),re.getSearchAutocomplete(r,4)]);y(P),p($)}catch(P){console.error("Failed to fetch search suggestions:",P)}d(!1)},300):(y([]),p(null),d(!1)),()=>{L.current&&clearTimeout(L.current)}),[r]),l.useEffect(()=>{const P=$=>{A.current&&!A.current.contains($.target)&&j(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const Y=(P=r,$)=>{const B=P.trim();if(!B)return;const O=[B,...k.filter(o=>o!==B)].slice(0,5);if(E(O),localStorage.setItem("ritkart_recent_searches",JSON.stringify(O)),j(!1),s)s(B,$);else{const o=new URLSearchParams;o.set("q",B),D(`/search?${o.toString()}`)}},T=P=>{c(P),Y(P)},z=()=>{E([]),localStorage.removeItem("ritkart_recent_searches")},V=()=>r.trim().length>=2?e.jsx("div",{className:"p-2 max-h-96 overflow-y-auto",children:S?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-orange-500"})}):e.jsxs(e.Fragment,{children:[f.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(de,{className:"w-3 h-3"}),"Suggestions"]}),f.map((P,$)=>e.jsxs("button",{onClick:()=>T(P),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:P})]},$))]}),b&&e.jsxs(e.Fragment,{children:[b.products.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(Re,{className:"w-3 h-3"}),"Products"]}),b.products.map((P,$)=>e.jsxs("button",{onClick:()=>T(P),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-gray-900",children:P})]},$))]}),b.brands.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(We,{className:"w-3 h-3"}),"Brands"]}),b.brands.map((P,$)=>e.jsxs("button",{onClick:()=>T(P),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(We,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-gray-900",children:P})]},$))]}),b.categories.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(Ke,{className:"w-3 h-3"}),"Categories"]}),b.categories.map((P,$)=>e.jsxs("button",{onClick:()=>T(P),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-gray-900",children:P})]},$))]}),b.tags.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(He,{className:"w-3 h-3"}),"Tags"]}),b.tags.map((P,$)=>e.jsxs("button",{onClick:()=>T(P),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-orange-400"}),e.jsx("span",{className:"text-gray-900",children:P})]},$))]})]})]})}):e.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto",children:[k.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-gray-500 uppercase tracking-wide",children:[e.jsx(Ae,{className:"w-3 h-3"}),"Recent Searches"]}),e.jsx("button",{onClick:z,className:"text-xs text-orange-600 hover:text-orange-700",children:"Clear all"})]}),k.map((P,$)=>e.jsxs("button",{onClick:()=>T(P),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:P})]},$))]}),v.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 px-1 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:[e.jsx(Mt,{className:"w-3 h-3"}),"Popular Searches"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:v.map((P,$)=>e.jsx(H,{variant:"secondary",className:"cursor-pointer hover:bg-orange-100 hover:text-orange-700",onClick:()=>T(P),children:P},$))})]})]});return e.jsxs("div",{className:`relative ${i}`,ref:A,children:[e.jsxs("form",{onSubmit:P=>{P.preventDefault(),Y()},className:"flex",children:[e.jsxs(ta,{children:[e.jsx(aa,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"bg-gray-200 text-gray-700 border-none rounded-l-md rounded-r-none px-3 py-2 h-10 min-w-[80px]",children:[e.jsx("span",{className:"truncate max-w-[60px]",children:h}),e.jsx($e,{className:"w-3 h-3 ml-1 flex-shrink-0"})]})}),e.jsxs(ra,{className:"max-h-64 overflow-y-auto",children:[e.jsx(Ue,{onClick:()=>a("All"),children:"All Categories"}),u.map(P=>e.jsx(Ue,{onClick:()=>a(P.name),children:P.name},P.id))]})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ue,{ref:N,type:"text",placeholder:t,value:r,onChange:P=>c(P.target.value),onFocus:()=>j(!0),className:"rounded-none border-none h-10 focus:ring-2 focus:ring-orange-400 pr-8"}),r&&e.jsx("button",{type:"button",onClick:()=>{c(""),y([]),p(null),N.current?.focus()},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(X,{className:"w-4 h-4"})})]}),e.jsx(R,{type:"submit",className:"amazon-orange rounded-l-none rounded-r-md px-4 h-10",children:e.jsx(de,{className:"w-4 h-4"})})]}),g&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-md shadow-lg z-50 mt-1",children:V()})]})},la=l.createContext(void 0),ye=()=>{const s=l.useContext(la);if(s===void 0)throw new Error("useCart must be used within a CartProvider");return s},br=()=>{const[s,t]=l.useState(null),[i,r]=l.useState(!1),{isAuthenticated:c}=ie();l.useEffect(()=>{c?h():t(null)},[c]);const h=async()=>{if(c)try{r(!0);const b=await oe.getCart();t(b)}catch(b){b.response?.status!==404&&console.error("Failed to fetch cart:",b)}finally{r(!1)}},a=async(b,p=1,v)=>{if(!c){M.error("Please sign in to add items to cart");return}try{r(!0);const w=await oe.addToCart(b.id,p,v);t(w),M.success(`${b.title} added to cart`)}catch(w){const k=w.response?.data?.message||"Failed to add item to cart";throw M.error(k),w}finally{r(!1)}},u=async(b,p)=>{if(c)try{if(r(!0),p<=0){await x(b);return}const v=await oe.updateCartItem(b,p);t(v),M.success("Cart updated")}catch(v){const w=v.response?.data?.message||"Failed to update cart item";throw M.error(w),v}finally{r(!1)}},x=async b=>{if(c)try{r(!0);const p=await oe.removeFromCart(b);t(p),M.success("Item removed from cart")}catch(p){const v=p.response?.data?.message||"Failed to remove item from cart";throw M.error(v),p}finally{r(!1)}};return{cart:s,loading:i,addToCart:a,updateCartItem:u,removeFromCart:x,clearCart:async()=>{if(c)try{r(!0),await oe.clearCart(),t(null),M.success("Cart cleared")}catch(b){const p=b.response?.data?.message||"Failed to clear cart";throw M.error(p),b}finally{r(!1)}},getCartItemCount:()=>s?.totalItems||0,getCartTotal:()=>s?.total||0,isInCart:b=>s?.items.some(p=>p.product.id===b)||!1,refreshCart:h}},oa=l.createContext(void 0),ca=()=>{const s=l.useContext(oa);if(s===void 0)throw new Error("useWishlist must be used within a WishlistProvider");return s},Nr=()=>{const[s,t]=l.useState(null),[i,r]=l.useState([]),[c,h]=l.useState(!1),{isAuthenticated:a}=ie();l.useEffect(()=>{a?u():(t(null),r([]))},[a]);const u=async()=>{if(a)try{h(!0);const p=await ce.getWishlistWithProducts();t(p.wishlist),r(p.products)}catch(p){p.response?.status!==404&&console.error("Failed to fetch wishlist:",p)}finally{h(!1)}};return{wishlist:s,wishlistProducts:i,loading:c,addToWishlist:async p=>{if(!a){M.error("Please sign in to add items to wishlist");return}try{h(!0);const v=await ce.addToWishlist(p.id);t(v),i.find(w=>w.id===p.id)||r(w=>[...w,p]),M.success(`${p.title} added to wishlist`)}catch(v){const w=v.response?.data?.message||"Failed to add item to wishlist";throw M.error(w),v}finally{h(!1)}},removeFromWishlist:async p=>{if(a)try{h(!0);const v=await ce.removeFromWishlist(p);t(v),r(k=>k.filter(E=>E.id!==p));const w=i.find(k=>k.id===p);M.success(`${w?.title||"Item"} removed from wishlist`)}catch(v){const w=v.response?.data?.message||"Failed to remove item from wishlist";throw M.error(w),v}finally{h(!1)}},toggleWishlist:async p=>{if(!a){M.error("Please sign in to manage your wishlist");return}try{h(!0);const v=await ce.toggleWishlist(p.id);t(v.wishlist),v.added?(i.find(w=>w.id===p.id)||r(w=>[...w,p]),M.success(`${p.title} added to wishlist`)):(r(w=>w.filter(k=>k.id!==p.id)),M.success(`${p.title} removed from wishlist`))}catch(v){const w=v.response?.data?.message||"Failed to update wishlist";throw M.error(w),v}finally{h(!1)}},clearWishlist:async()=>{if(a)try{h(!0);const p=await ce.clearWishlist();t(p),r([]),M.success("Wishlist cleared")}catch(p){const v=p.response?.data?.message||"Failed to clear wishlist";throw M.error(v),p}finally{h(!1)}},isInWishlist:p=>s?.items.some(v=>v.productId===p)||!1,getWishlistItemCount:()=>s?.items.length||0,refreshWishlist:u}};function is({...s}){return e.jsx(ot,{"data-slot":"sheet",...s})}function ls({...s}){return e.jsx(ct,{"data-slot":"sheet-trigger",...s})}function da({...s}){return e.jsx(xt,{"data-slot":"sheet-portal",...s})}function ma({className:s,...t}){return e.jsx(gt,{"data-slot":"sheet-overlay",className:_("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function os({className:s,children:t,side:i="right",...r}){return e.jsxs(da,{children:[e.jsx(ma,{}),e.jsxs(dt,{"data-slot":"sheet-content",className:_("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",i==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",i==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",i==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",i==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",s),...r,children:[t,e.jsxs(mt,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(X,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function cs({className:s,...t}){return e.jsx("div",{"data-slot":"sheet-header",className:_("flex flex-col gap-1.5 p-4",s),...t})}function ds({className:s,...t}){return e.jsx(ut,{"data-slot":"sheet-title",className:_("text-foreground font-semibold",s),...t})}function ms({className:s,...t}){return e.jsx(ht,{"data-slot":"sheet-description",className:_("text-muted-foreground text-sm",s),...t})}const ua=l.createContext(void 0),ha=()=>{const s=l.useContext(ua);if(s===void 0)throw new Error("useComparison must be used within a ComparisonProvider");return s},yr=()=>{const[s,t]=l.useState([]),i=4;l.useEffect(()=>{const g=localStorage.getItem("ritkart_comparison");if(g)try{const j=JSON.parse(g);t(Array.isArray(j)?j:[])}catch(j){console.error("Failed to parse comparison data:",j),localStorage.removeItem("ritkart_comparison")}},[]),l.useEffect(()=>{localStorage.setItem("ritkart_comparison",JSON.stringify(s))},[s]);const r=g=>{if(s.length>=i){U.error(`You can only compare up to ${i} products at once`);return}if(a(g.id)){U.info("Product is already in comparison");return}t(j=>[...j,g]),U.success(`${g.name||g.title} added to comparison`)},c=g=>{const j=s.find(f=>f.id===g);t(f=>f.filter(y=>y.id!==g)),j&&U.success(`${j.name||j.title} removed from comparison`)},h=()=>{t([]),U.success("Comparison cleared")},a=g=>s.some(j=>j.id===g),u=s.length<i,x=s.length;return{comparedProducts:s,addToComparison:r,removeFromComparison:c,clearComparison:h,isInComparison:a,canAddMore:u,comparisonCount:x,maxComparisonItems:i}},me=({product:s,size:t="md",variant:i="ghost",showText:r=!1,className:c})=>{const{isInWishlist:h,toggleWishlist:a,loading:u}=ca(),{isAuthenticated:x}=ie(),g=h(s.id),j=async b=>{b.preventDefault(),b.stopPropagation(),x&&await a(s)},f={sm:"h-8 w-8 p-0",md:"h-9 w-9 p-0",lg:"h-10 w-10 p-0"},y={sm:"h-3.5 w-3.5",md:"h-4 w-4",lg:"h-5 w-5"};return r?e.jsxs(R,{variant:i==="filled"?"default":i,size:t,onClick:j,disabled:u,className:_("flex items-center gap-2",g&&i==="filled"&&"bg-red-500 hover:bg-red-600",g&&i==="outline"&&"border-red-500 text-red-500 hover:bg-red-50",g&&i==="ghost"&&"text-red-500 hover:bg-red-50",c),children:[e.jsx(ve,{className:_(y[t],g&&"fill-current")}),g?"Remove from Wishlist":"Add to Wishlist"]}):e.jsx(R,{variant:i==="filled"?"default":i,size:t,onClick:j,disabled:u,className:_(f[t],"rounded-full",g&&i==="filled"&&"bg-red-500 hover:bg-red-600",g&&i==="outline"&&"border-red-500 text-red-500 hover:bg-red-50",g&&i==="ghost"&&"text-red-500 hover:bg-red-50 hover:text-red-600",!g&&i==="ghost"&&"text-gray-400 hover:text-red-500",c),title:g?"Remove from Wishlist":"Add to Wishlist",children:e.jsx(ve,{className:_(y[t],g&&"fill-current")})})},je=({product:s,size:t="default",variant:i="outline",showText:r=!1,className:c})=>{const{isInComparison:h,addToComparison:a,removeFromComparison:u,canAddMore:x}=ha(),g=h(s.id),j=p=>{p.preventDefault(),p.stopPropagation(),g?u(s.id):x&&a(s)},f=g?r?"Remove from Compare":"":r?"Compare":"",y=g?e.jsx(X,{className:"w-4 h-4"}):e.jsx(Lt,{className:"w-4 h-4"}),b=g?"default":i;return e.jsxs(R,{onClick:j,size:t,variant:b,disabled:!g&&!x,className:_("transition-colors",g&&"bg-blue-600 hover:bg-blue-700 text-white",!x&&!g&&"opacity-50 cursor-not-allowed",c),title:g?"Remove from comparison":"Add to comparison",children:[y,r&&f&&e.jsx("span",{className:"ml-2",children:f})]})},ze=({product:s,variant:t="default",showQuickAdd:i=!0,className:r})=>{const{addToCart:c,loading:h}=ye(),{isAuthenticated:a}=ie(),u=async f=>{if(f.preventDefault(),f.stopPropagation(),!!a)try{await c(s,1)}catch(y){console.error("Failed to add to cart:",y)}},x=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f),g=s.originalPrice?Math.round((s.originalPrice-s.price)/s.originalPrice*100):0,j=f=>e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((y,b)=>e.jsx(Q,{className:`w-4 h-4 ${b<Math.floor(f)?"text-orange-400 fill-current":b<f?"text-orange-400 fill-current opacity-50":"text-gray-300"}`},b)),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",s.reviewCount,")"]})]});return t==="list"?e.jsx(W,{className:_("amazon-card group",r),children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(q,{to:`/product/${s.id}`,children:e.jsxs("div",{className:"w-32 h-32 bg-gray-100 rounded-lg overflow-hidden",children:[s.thumbnail||s.images[0]?e.jsx("img",{src:s.thumbnail||s.images[0],alt:s.title,className:"w-full h-full object-cover",onError:f=>{const y=f.target;y.style.display="none",y.nextElementSibling?.classList.remove("hidden")}}):null,e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500 text-sm",children:"Product"})]})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(q,{to:`/product/${s.id}`,children:e.jsx("h3",{className:"font-medium text-lg mb-2 group-hover:text-orange-600 transition-colors line-clamp-2",children:s.title})}),j(s.rating),e.jsx("p",{className:"text-gray-600 text-sm mt-2 line-clamp-2",children:s.shortDescription||s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"amazon-price text-2xl font-bold",children:x(s.price)}),s.originalPrice&&s.originalPrice>s.price&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-500 line-through text-lg",children:x(s.originalPrice)}),e.jsxs(H,{className:"bg-red-500 text-white",children:["-",g,"%"]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Brand: ",e.jsx("span",{className:"font-medium",children:s.brand})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-2",children:[e.jsx(R,{onClick:u,disabled:h||s.stock===0,className:"amazon-button",children:h?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{product:s,size:"sm",variant:"outline",className:"flex-1"}),e.jsx(je,{product:s,size:"sm",variant:"outline",className:"flex-1"})]})]})]})})}):e.jsx(W,{className:_("amazon-card group h-full flex flex-col",r),children:e.jsxs(K,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"relative mb-4",children:[g>0&&e.jsxs(H,{className:"absolute top-2 left-2 bg-red-500 text-white font-bold z-10",children:["-",g,"%"]}),s.stock===0&&e.jsx(H,{className:"absolute top-2 right-2 bg-gray-500 text-white z-10",children:"Out of Stock"}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:e.jsx(me,{product:s,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white shadow-sm"})}),e.jsx(q,{to:`/product/${s.id}`,children:e.jsxs("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden group-hover:scale-105 transition-transform",children:[s.thumbnail||s.images[0]?e.jsx("img",{src:s.thumbnail||s.images[0],alt:s.title,className:"w-full h-full object-cover",onError:f=>{const y=f.target;y.style.display="none",y.nextElementSibling?.classList.remove("hidden")}}):null,e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500 text-sm",children:"Product Image"})]})}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[e.jsx(R,{size:"sm",variant:"secondary",children:e.jsx(ss,{className:"w-4 h-4"})}),e.jsx(me,{product:s,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"}),e.jsx(je,{product:s,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(q,{to:`/product/${s.id}`,children:e.jsx("h3",{className:"font-medium mb-2 group-hover:text-orange-600 transition-colors line-clamp-2",children:s.title})}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",e.jsx("span",{className:"font-medium",children:s.brand})]}),j(s.rating),e.jsxs("div",{className:"mt-auto pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"amazon-price text-xl font-bold",children:x(s.price)}),s.originalPrice&&s.originalPrice>s.price&&e.jsx("span",{className:"text-gray-500 line-through text-sm",children:x(s.originalPrice)})]}),s.stock>0&&s.stock<=10&&e.jsxs("p",{className:"text-red-600 text-sm mb-2 font-medium",children:["Only ",s.stock," left in stock"]}),i&&e.jsx(R,{onClick:u,disabled:h||s.stock===0,className:"w-full amazon-button",size:"sm",children:h?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.stock===0?"Out of Stock":"Add to Cart"})]})]})]})})},ge="ritkart_recently_viewed",Pe=12,us=()=>{const[s,t]=l.useState([]);l.useEffect(()=>{(()=>{try{const x=localStorage.getItem(ge);if(x){const g=JSON.parse(x);if(Array.isArray(g)){const j=g.sort((f,y)=>y.viewedAt-f.viewedAt).slice(0,Pe);t(j)}}}catch(x){console.error("Failed to load recently viewed products:",x),localStorage.removeItem(ge)}})()},[]),l.useEffect(()=>{s.length>0&&localStorage.setItem(ge,JSON.stringify(s))},[s]);const i=l.useCallback(u=>{const x={id:u.id,name:u.name,title:u.title,price:u.price,originalPrice:u.originalPrice,brand:u.brand,thumbnail:u.thumbnail,images:u.images,rating:u.rating||u.averageRating||0,averageRating:u.averageRating,slug:u.slug,viewedAt:Date.now()};t(g=>{const j=g.filter(y=>y.id!==u.id);return[x,...j].slice(0,Pe)})},[]),r=l.useCallback(u=>{t(x=>x.filter(g=>g.id!==u))},[]),c=l.useCallback(()=>{t([]),localStorage.removeItem(ge)},[]),h=l.useCallback((u,x)=>{let g=s;return u&&(g=g.filter(j=>j.id!==u)),x&&(g=g.slice(0,x)),g},[s]),a=l.useCallback(u=>s.some(x=>x.id===u),[s]);return{recentlyViewedProducts:s,addToRecentlyViewed:i,removeFromRecentlyViewed:r,clearRecentlyViewed:c,getRecentlyViewed:h,isRecentlyViewed:a,recentlyViewedCount:s.length,maxRecentlyViewed:Pe}},xa=({title:s="Recently Viewed",showTitle:t=!0,excludeProductId:i,limit:r=8,variant:c="horizontal",showClearAll:h=!0,className:a})=>{const{getRecentlyViewed:u,removeFromRecentlyViewed:x,clearRecentlyViewed:g,recentlyViewedCount:j}=us(),{addToCart:f,loading:y}=ye(),{isAuthenticated:b}=ie(),p=u(i,r),v=d=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d),w=d=>e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((D,N)=>e.jsx(Q,{className:`w-3 h-3 ${N<Math.floor(d)?"text-yellow-400 fill-current":N<d?"text-yellow-400 fill-current opacity-50":"text-gray-300"}`},N))}),k=async(d,D)=>{if(d.preventDefault(),d.stopPropagation(),!!b)try{const N={...D,stock:100,isActive:!0};await f(N,1)}catch(N){console.error("Failed to add to cart:",N)}},E=d=>!d.originalPrice||d.originalPrice<=d.price?0:Math.round((d.originalPrice-d.price)/d.originalPrice*100),S=d=>{const N=Date.now()-d,A=Math.floor(N/6e4),L=Math.floor(N/36e5),Y=Math.floor(N/864e5);return A<60?`${A}m ago`:L<24?`${L}h ago`:`${Y}d ago`};return p.length===0?null:e.jsxs("div",{className:_("w-full",a),children:[t&&e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-6 h-6 text-gray-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s}),e.jsx(H,{variant:"secondary",className:"ml-2",children:j})]}),h&&p.length>0&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:g,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Clear All"]})]}),c==="horizontal"?e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide",children:p.map(d=>e.jsx(W,{className:"flex-shrink-0 w-64 group",children:e.jsxs(K,{className:"p-4",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("button",{onClick:D=>{D.preventDefault(),x(d.id)},className:"absolute -top-2 -right-2 p-1 rounded-full bg-gray-100 hover:bg-red-100 text-gray-500 hover:text-red-600 transition-colors z-10",children:e.jsx(X,{className:"w-3 h-3"})}),e.jsx(q,{to:`/product/${d.id}`,children:e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden group-hover:scale-105 transition-transform",children:d.thumbnail||d.images[0]?e.jsx("img",{src:d.thumbnail||d.images[0],alt:d.name||d.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500 text-sm",children:"No Image"})})}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[e.jsx(q,{to:`/product/${d.id}`,children:e.jsx(R,{size:"sm",variant:"secondary",children:e.jsx(ss,{className:"w-4 h-4"})})}),e.jsx(me,{product:d,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"}),e.jsx(je,{product:d,size:"sm",variant:"ghost",className:"bg-white/90 hover:bg-white"})]})]}),e.jsx(q,{to:`/product/${d.id}`,children:e.jsx("h3",{className:"font-medium text-sm mb-2 group-hover:text-blue-600 transition-colors line-clamp-2",children:d.name||d.title})}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:d.brand}),w(d.rating),e.jsxs("div",{className:"flex items-center gap-2 mt-2 mb-3",children:[e.jsx("span",{className:"font-bold text-blue-600",children:v(d.price)}),d.originalPrice&&d.originalPrice>d.price&&e.jsx("span",{className:"text-gray-500 line-through text-sm",children:v(d.originalPrice)}),E(d)>0&&e.jsxs(H,{className:"bg-red-500 text-white text-xs",children:["-",E(d),"%"]})]}),e.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:e.jsxs("span",{children:["Viewed ",S(d.viewedAt)]})}),e.jsx(R,{onClick:D=>k(D,d),disabled:y,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:y?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})})]})},d.id))}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:p.map(d=>e.jsx(W,{className:"group",children:e.jsxs(K,{className:"p-4",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("button",{onClick:D=>{D.preventDefault(),x(d.id)},className:"absolute -top-2 -right-2 p-1 rounded-full bg-gray-100 hover:bg-red-100 text-gray-500 hover:text-red-600 transition-colors z-10",children:e.jsx(X,{className:"w-3 h-3"})}),e.jsx(q,{to:`/product/${d.id}`,children:e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden group-hover:scale-105 transition-transform",children:d.thumbnail||d.images[0]?e.jsx("img",{src:d.thumbnail||d.images[0],alt:d.name||d.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500 text-sm",children:"No Image"})})})]}),e.jsx(q,{to:`/product/${d.id}`,children:e.jsx("h3",{className:"font-medium text-sm mb-2 group-hover:text-blue-600 transition-colors line-clamp-2",children:d.name||d.title})}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:d.brand}),w(d.rating),e.jsxs("div",{className:"flex items-center gap-2 mt-2 mb-2",children:[e.jsx("span",{className:"font-bold text-blue-600",children:v(d.price)}),d.originalPrice&&d.originalPrice>d.price&&e.jsx("span",{className:"text-gray-500 line-through text-sm",children:v(d.originalPrice)})]}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Viewed ",S(d.viewedAt)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{onClick:D=>k(D,d),disabled:y,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:e.jsx(he,{className:"w-4 h-4"})}),e.jsx(me,{product:d,size:"sm",variant:"outline"}),e.jsx(je,{product:d,size:"sm",variant:"outline"})]})]})},d.id))})]})};var hs=["PageUp","PageDown"],xs=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],gs={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},le="Slider",[Ie,ga,fa]=ft(le),[fs,wr]=Ne(le,[fa]),[pa,we]=fs(le),ps=l.forwardRef((s,t)=>{const{name:i,min:r=0,max:c=100,step:h=1,orientation:a="horizontal",disabled:u=!1,minStepsBetweenThumbs:x=0,defaultValue:g=[r],value:j,onValueChange:f=()=>{},onValueCommit:y=()=>{},inverted:b=!1,form:p,...v}=s,w=l.useRef(new Set),k=l.useRef(0),S=a==="horizontal"?va:ja,[d=[],D]=Je({prop:j,defaultProp:g,onChange:z=>{[...w.current][k.current]?.focus(),f(z)}}),N=l.useRef(d);function A(z){const V=Sa(d,z);T(z,V)}function L(z){T(z,k.current)}function Y(){const z=N.current[k.current];d[k.current]!==z&&y(d)}function T(z,V,{commit:P}={commit:!1}){const $=Ra(h),B=Aa(Math.round((z-r)/h)*h+r,$),O=Xe(B,[r,c]);D((o=[])=>{const n=ya(o,O,V);if(ka(n,x*h)){k.current=n.indexOf(O);const m=String(n)!==String(o);return m&&P&&y(n),m?n:o}else return o})}return e.jsx(pa,{scope:s.__scopeSlider,name:i,disabled:u,min:r,max:c,valueIndexToChangeRef:k,thumbs:w.current,values:d,orientation:a,form:p,children:e.jsx(Ie.Provider,{scope:s.__scopeSlider,children:e.jsx(Ie.Slot,{scope:s.__scopeSlider,children:e.jsx(S,{"aria-disabled":u,"data-disabled":u?"":void 0,...v,ref:t,onPointerDown:se(v.onPointerDown,()=>{u||(N.current=d)}),min:r,max:c,inverted:b,onSlideStart:u?void 0:A,onSlideMove:u?void 0:L,onSlideEnd:u?void 0:Y,onHomeKeyDown:()=>!u&&T(r,0,{commit:!0}),onEndKeyDown:()=>!u&&T(c,d.length-1,{commit:!0}),onStepKeyDown:({event:z,direction:V})=>{if(!u){const B=hs.includes(z.key)||z.shiftKey&&xs.includes(z.key)?10:1,O=k.current,o=d[O],n=h*B*V;T(o+n,O,{commit:!0})}}})})})})});ps.displayName=le;var[vs,js]=fs(le,{startEdge:"left",endEdge:"right",size:"width",direction:1}),va=l.forwardRef((s,t)=>{const{min:i,max:r,dir:c,inverted:h,onSlideStart:a,onSlideMove:u,onSlideEnd:x,onStepKeyDown:g,...j}=s,[f,y]=l.useState(null),b=ne(t,S=>y(S)),p=l.useRef(void 0),v=Qe(c),w=v==="ltr",k=w&&!h||!w&&h;function E(S){const d=p.current||f.getBoundingClientRect(),D=[0,d.width],A=Ee(D,k?[i,r]:[r,i]);return p.current=d,A(S-d.left)}return e.jsx(vs,{scope:s.__scopeSlider,startEdge:k?"left":"right",endEdge:k?"right":"left",direction:k?1:-1,size:"width",children:e.jsx(bs,{dir:v,"data-orientation":"horizontal",...j,ref:b,style:{...j.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const d=E(S.clientX);a?.(d)},onSlideMove:S=>{const d=E(S.clientX);u?.(d)},onSlideEnd:()=>{p.current=void 0,x?.()},onStepKeyDown:S=>{const D=gs[k?"from-left":"from-right"].includes(S.key);g?.({event:S,direction:D?-1:1})}})})}),ja=l.forwardRef((s,t)=>{const{min:i,max:r,inverted:c,onSlideStart:h,onSlideMove:a,onSlideEnd:u,onStepKeyDown:x,...g}=s,j=l.useRef(null),f=ne(t,j),y=l.useRef(void 0),b=!c;function p(v){const w=y.current||j.current.getBoundingClientRect(),k=[0,w.height],S=Ee(k,b?[r,i]:[i,r]);return y.current=w,S(v-w.top)}return e.jsx(vs,{scope:s.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:e.jsx(bs,{"data-orientation":"vertical",...g,ref:f,style:{...g.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const w=p(v.clientY);h?.(w)},onSlideMove:v=>{const w=p(v.clientY);a?.(w)},onSlideEnd:()=>{y.current=void 0,u?.()},onStepKeyDown:v=>{const k=gs[b?"from-bottom":"from-top"].includes(v.key);x?.({event:v,direction:k?-1:1})}})})}),bs=l.forwardRef((s,t)=>{const{__scopeSlider:i,onSlideStart:r,onSlideMove:c,onSlideEnd:h,onHomeKeyDown:a,onEndKeyDown:u,onStepKeyDown:x,...g}=s,j=we(le,i);return e.jsx(G.span,{...g,ref:t,onKeyDown:se(s.onKeyDown,f=>{f.key==="Home"?(a(f),f.preventDefault()):f.key==="End"?(u(f),f.preventDefault()):hs.concat(xs).includes(f.key)&&(x(f),f.preventDefault())}),onPointerDown:se(s.onPointerDown,f=>{const y=f.target;y.setPointerCapture(f.pointerId),f.preventDefault(),j.thumbs.has(y)?y.focus():r(f)}),onPointerMove:se(s.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&c(f)}),onPointerUp:se(s.onPointerUp,f=>{const y=f.target;y.hasPointerCapture(f.pointerId)&&(y.releasePointerCapture(f.pointerId),h(f))})})}),Ns="SliderTrack",ys=l.forwardRef((s,t)=>{const{__scopeSlider:i,...r}=s,c=we(Ns,i);return e.jsx(G.span,{"data-disabled":c.disabled?"":void 0,"data-orientation":c.orientation,...r,ref:t})});ys.displayName=Ns;var Fe="SliderRange",ws=l.forwardRef((s,t)=>{const{__scopeSlider:i,...r}=s,c=we(Fe,i),h=js(Fe,i),a=l.useRef(null),u=ne(t,a),x=c.values.length,g=c.values.map(y=>Ps(y,c.min,c.max)),j=x>1?Math.min(...g):0,f=100-Math.max(...g);return e.jsx(G.span,{"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,...r,ref:u,style:{...s.style,[h.startEdge]:j+"%",[h.endEdge]:f+"%"}})});ws.displayName=Fe;var _e="SliderThumb",Ss=l.forwardRef((s,t)=>{const i=ga(s.__scopeSlider),[r,c]=l.useState(null),h=ne(t,u=>c(u)),a=l.useMemo(()=>r?i().findIndex(u=>u.ref.current===r):-1,[i,r]);return e.jsx(ba,{...s,ref:h,index:a})}),ba=l.forwardRef((s,t)=>{const{__scopeSlider:i,index:r,name:c,...h}=s,a=we(_e,i),u=js(_e,i),[x,g]=l.useState(null),j=ne(t,E=>g(E)),f=x?a.form||!!x.closest("form"):!0,y=pt(x),b=a.values[r],p=b===void 0?0:Ps(b,a.min,a.max),v=wa(r,a.values.length),w=y?.[u.size],k=w?Ca(w,p,u.direction):0;return l.useEffect(()=>{if(x)return a.thumbs.add(x),()=>{a.thumbs.delete(x)}},[x,a.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${p}% + ${k}px)`},children:[e.jsx(Ie.ItemSlot,{scope:s.__scopeSlider,children:e.jsx(G.span,{role:"slider","aria-label":s["aria-label"]||v,"aria-valuemin":a.min,"aria-valuenow":b,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...h,ref:j,style:b===void 0?{display:"none"}:s.style,onFocus:se(s.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),f&&e.jsx(Cs,{name:c??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:b},r)]})});Ss.displayName=_e;var Na="RadioBubbleInput",Cs=l.forwardRef(({__scopeSlider:s,value:t,...i},r)=>{const c=l.useRef(null),h=ne(c,r),a=vt(t);return l.useEffect(()=>{const u=c.current;if(!u)return;const x=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(x,"value").set;if(a!==t&&j){const f=new Event("input",{bubbles:!0});j.call(u,t),u.dispatchEvent(f)}},[a,t]),e.jsx(G.input,{style:{display:"none"},...i,ref:h,defaultValue:t})});Cs.displayName=Na;function ya(s=[],t,i){const r=[...s];return r[i]=t,r.sort((c,h)=>c-h)}function Ps(s,t,i){const h=100/(i-t)*(s-t);return Xe(h,[0,100])}function wa(s,t){return t>2?`Value ${s+1} of ${t}`:t===2?["Minimum","Maximum"][s]:void 0}function Sa(s,t){if(s.length===1)return 0;const i=s.map(c=>Math.abs(c-t)),r=Math.min(...i);return i.indexOf(r)}function Ca(s,t,i){const r=s/2,h=Ee([0,50],[0,r]);return(r-h(t)*i)*i}function Pa(s){return s.slice(0,-1).map((t,i)=>s[i+1]-t)}function ka(s,t){if(t>0){const i=Pa(s);return Math.min(...i)>=t}return!0}function Ee(s,t){return i=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(s[1]-s[0]);return t[0]+r*(i-s[0])}}function Ra(s){return(String(s).split(".")[1]||"").length}function Aa(s,t){const i=Math.pow(10,t);return Math.round(s*i)/i}var Ia=ps,Fa=ys,_a=ws,Da=Ss;function ks({className:s,defaultValue:t,value:i,min:r=0,max:c=100,...h}){const a=l.useMemo(()=>Array.isArray(i)?i:Array.isArray(t)?t:[r,c],[i,t,r,c]);return e.jsxs(Ia,{"data-slot":"slider",defaultValue:t,value:i,min:r,max:c,className:_("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...h,children:[e.jsx(Fa,{"data-slot":"slider-track",className:_("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(_a,{"data-slot":"slider-range",className:_("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(u,x)=>e.jsx(Da,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},x))]})}function Rs({...s}){return e.jsx(jt,{"data-slot":"select",...s})}function As({...s}){return e.jsx(yt,{"data-slot":"select-value",...s})}function Is({className:s,size:t="default",children:i,...r}){return e.jsxs(bt,{"data-slot":"select-trigger","data-size":t,className:_("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r,children:[i,e.jsx(Nt,{asChild:!0,children:e.jsx($e,{className:"size-4 opacity-50"})})]})}function Fs({className:s,children:t,position:i="popper",...r}){return e.jsx(wt,{children:e.jsxs(St,{"data-slot":"select-content",className:_("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...r,children:[e.jsx($a,{}),e.jsx(Ct,{className:_("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),e.jsx(Ta,{})]})})}function J({className:s,children:t,...i}){return e.jsxs(Pt,{"data-slot":"select-item",className:_("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...i,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(kt,{children:e.jsx(ts,{className:"size-4"})})}),e.jsx(Rt,{children:t})]})}function $a({className:s,...t}){return e.jsx(At,{"data-slot":"select-scroll-up-button",className:_("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Bt,{className:"size-4"})})}function Ta({className:s,...t}){return e.jsx(It,{"data-slot":"select-scroll-down-button",className:_("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx($e,{className:"size-4"})})}const za=()=>{const[s,t]=es();De();const{addItem:i}=ye(),[r,c]=l.useState([]),[h,a]=l.useState([]),[u,x]=l.useState([]),[g,j]=l.useState(!0),[f,y]=l.useState("grid"),[b,p]=l.useState("featured"),[v,w]=l.useState(s.get("search")||""),[k,E]=l.useState(!1),[S,d]=l.useState({categories:s.get("category")?[s.get("category")]:[],brands:[],priceRange:[0,2e3],rating:0,inStock:!1}),[D,N]=l.useState(1),A=20,[L,Y]=l.useState([]);l.useEffect(()=>{(async()=>{try{j(!0);const[n,m]=await Promise.all([re.getAllProducts({page:0,size:100}),Te.getAllCategories()]);if(n.success){c(n.data.content||[]);const I=Array.from(new Set(n.data.content?.map(ee=>ee.brand).filter(Boolean)||[]));Y(I)}m.success&&a(m.data||[])}catch(n){console.error("Failed to fetch data:",n),U.error("Failed to load products")}finally{j(!1)}})()},[]);const T=l.useMemo(()=>{let o=[...r];if(v){const n=v.toLowerCase();o=o.filter(m=>m.title.toLowerCase().includes(n)||m.description.toLowerCase().includes(n)||m.brand.toLowerCase().includes(n))}switch(S.categories.length>0&&(o=o.filter(n=>S.categories.includes(n.category.id))),S.brands.length>0&&(o=o.filter(n=>S.brands.includes(n.brand))),o=o.filter(n=>n.price>=S.priceRange[0]&&n.price<=S.priceRange[1]),S.rating>0&&(o=o.filter(n=>n.rating>=S.rating)),S.inStock&&(o=o.filter(n=>n.stock>0)),b){case"price-low":o.sort((n,m)=>n.price-m.price);break;case"price-high":o.sort((n,m)=>m.price-n.price);break;case"rating":o.sort((n,m)=>m.rating-n.rating);break;case"newest":o.sort((n,m)=>new Date(m.createdAt).getTime()-new Date(n.createdAt).getTime());break;case"name":o.sort((n,m)=>n.title.localeCompare(m.title));break;default:o.sort((n,m)=>(m.isFeatured?1:0)-(n.isFeatured?1:0))}return o},[r,v,S,b]),z=l.useMemo(()=>{const o=(D-1)*A;return T.slice(o,o+A)},[T,D]),V=Math.ceil(T.length/A);l.useEffect(()=>{const o=new URLSearchParams;v&&o.set("search",v),S.categories.length>0&&o.set("category",S.categories[0]),b!=="featured"&&o.set("sort",b),t(o)},[v,S.categories,b,t]);const P=o=>{o.preventDefault(),N(1)},$=()=>{d({categories:[],brands:[],priceRange:[0,2e3],rating:0,inStock:!1}),w(""),N(1)},B=async o=>{try{await i(o.id,1),U.success(`${o.title} added to cart`)}catch{U.error("Failed to add item to cart")}},O=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Price Range"}),e.jsxs("div",{className:"px-3",children:[e.jsx(ks,{value:S.priceRange,onValueChange:o=>d(n=>({...n,priceRange:o})),max:2e3,step:10,className:"mb-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["$",S.priceRange[0]]}),e.jsxs("span",{children:["$",S.priceRange[1]]})]})]})]}),e.jsx(te,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Categories"}),e.jsx("div",{className:"space-y-2",children:h.map(o=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{id:`category-${o.id}`,checked:S.categories.includes(o.id),onCheckedChange:n=>{d(n?m=>({...m,categories:[...m.categories,o.id]}):m=>({...m,categories:m.categories.filter(I=>I!==o.id)}))}}),e.jsx("label",{htmlFor:`category-${o.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:o.name})]},o.id))})]}),e.jsx(te,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Brands"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:L.map(o=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{id:`brand-${o}`,checked:S.brands.includes(o),onCheckedChange:n=>{d(n?m=>({...m,brands:[...m.brands,o]}):m=>({...m,brands:m.brands.filter(I=>I!==o)}))}}),e.jsx("label",{htmlFor:`brand-${o}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:o})]},o))})]}),e.jsx(te,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Customer Rating"}),e.jsx("div",{className:"space-y-2",children:[4,3,2,1].map(o=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{id:`rating-${o}`,checked:S.rating===o,onCheckedChange:n=>{d(m=>({...m,rating:n?o:0}))}}),e.jsxs("label",{htmlFor:`rating-${o}`,className:"flex items-center text-sm",children:[e.jsx("div",{className:"flex items-center mr-1",children:[...Array(5)].map((n,m)=>e.jsx(Q,{className:`w-4 h-4 ${m<o?"text-orange-400 fill-current":"text-gray-300"}`},m))}),"& Up"]})]},o))})]}),e.jsx(te,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Availability"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{id:"in-stock",checked:S.inStock,onCheckedChange:o=>{d(n=>({...n,inStock:o}))}}),e.jsx("label",{htmlFor:"in-stock",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"In Stock Only"})]})]}),e.jsx(R,{variant:"outline",onClick:$,className:"w-full",children:"Clear All Filters"})]});return g?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((o,n)=>e.jsx("div",{className:"h-24 bg-gray-200 rounded"},n))})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(9)].map((o,n)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},n))})})]})}):e.jsx("div",{className:"bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("form",{onSubmit:P,className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(ue,{type:"text",placeholder:"Search products...",value:v,onChange:o=>w(o.target.value),className:"pl-10 h-12"})]}),e.jsx(R,{type:"submit",className:"h-12 px-6 amazon-button",children:"Search"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(W,{className:"sticky top-4",children:e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),e.jsx(Ot,{className:"w-5 h-5"})]}),e.jsx(O,{})]})})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:v?`Search results for "${v}"`:"All Products"}),e.jsxs("p",{className:"text-gray-600",children:[T.length," product",T.length!==1?"s":""," found"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(is,{open:k,onOpenChange:E,children:[e.jsx(ls,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"lg:hidden",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Filters"]})}),e.jsxs(os,{side:"left",className:"w-80",children:[e.jsxs(cs,{children:[e.jsx(ds,{children:"Filters"}),e.jsx(ms,{children:"Filter products by your preferences"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(O,{})})]})]}),e.jsxs("div",{className:"flex border rounded-lg",children:[e.jsx(R,{variant:f==="grid"?"default":"ghost",size:"sm",onClick:()=>y("grid"),className:"rounded-r-none",children:e.jsx(rs,{className:"w-4 h-4"})}),e.jsx(R,{variant:f==="list"?"default":"ghost",size:"sm",onClick:()=>y("list"),className:"rounded-l-none",children:e.jsx(ns,{className:"w-4 h-4"})})]}),e.jsxs(Rs,{value:b,onValueChange:p,children:[e.jsx(Is,{className:"w-48",children:e.jsx(As,{placeholder:"Sort by"})}),e.jsxs(Fs,{children:[e.jsx(J,{value:"featured",children:"Featured"}),e.jsx(J,{value:"price-low",children:"Price: Low to High"}),e.jsx(J,{value:"price-high",children:"Price: High to Low"}),e.jsx(J,{value:"rating",children:"Customer Rating"}),e.jsx(J,{value:"newest",children:"Newest First"}),e.jsx(J,{value:"name",children:"Name A-Z"})]})]})]})]}),(S.categories.length>0||S.brands.length>0||S.rating>0||S.inStock)&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[S.categories.map(o=>{const n=h.find(m=>m.id===o);return n?e.jsxs(H,{variant:"secondary",className:"flex items-center gap-1",children:[n.name,e.jsx(X,{className:"w-3 h-3 cursor-pointer",onClick:()=>d(m=>({...m,categories:m.categories.filter(I=>I!==o)}))})]},o):null}),S.brands.map(o=>e.jsxs(H,{variant:"secondary",className:"flex items-center gap-1",children:[o,e.jsx(X,{className:"w-3 h-3 cursor-pointer",onClick:()=>d(n=>({...n,brands:n.brands.filter(m=>m!==o)}))})]},o)),S.rating>0&&e.jsxs(H,{variant:"secondary",className:"flex items-center gap-1",children:[S.rating,"+ Stars",e.jsx(X,{className:"w-3 h-3 cursor-pointer",onClick:()=>d(o=>({...o,rating:0}))})]}),S.inStock&&e.jsxs(H,{variant:"secondary",className:"flex items-center gap-1",children:["In Stock",e.jsx(X,{className:"w-3 h-3 cursor-pointer",onClick:()=>d(o=>({...o,inStock:!1}))})]})]}),z.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(de,{className:"w-12 h-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search or filter criteria"}),e.jsx(R,{onClick:$,variant:"outline",children:"Clear all filters"})]}):e.jsxs(e.Fragment,{children:[f==="grid"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map(o=>e.jsx(ze,{product:o},o.id))}):e.jsx("div",{className:"space-y-4",children:z.map(o=>e.jsx(W,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:e.jsx(K,{className:"p-0",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-48 h-48 bg-gray-100 flex-shrink-0",children:e.jsx("img",{src:o.thumbnail||"/api/placeholder/200/200",alt:o.title,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(q,{to:`/product/${o.id}`,children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 hover:text-orange-600 transition-colors mb-2",children:o.title})}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:o.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((n,m)=>e.jsx(Q,{className:`w-4 h-4 ${m<Math.floor(o.rating)?"text-orange-400 fill-current":"text-gray-300"}`},m))}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",o.reviewCount,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",o.price]}),o.originalPrice&&o.originalPrice>o.price&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["$",o.originalPrice]}),e.jsxs(H,{variant:"destructive",children:[Math.round((o.originalPrice-o.price)/o.originalPrice*100),"% off"]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsxs(R,{onClick:()=>B(o),className:"amazon-button",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Add to Cart"]}),e.jsx(R,{variant:"outline",size:"sm",children:e.jsx(ve,{className:"w-4 h-4"})})]})]})})]})})},o.id))}),V>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-8",children:[e.jsx(R,{variant:"outline",onClick:()=>N(o=>Math.max(1,o-1)),disabled:D===1,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:[...Array(Math.min(5,V))].map((o,n)=>{const m=D<=3?n+1:D-2+n;return m>V?null:e.jsx(R,{variant:D===m?"default":"outline",size:"sm",onClick:()=>N(m),children:m},m)})}),e.jsx(R,{variant:"outline",onClick:()=>N(o=>Math.min(V,o+1)),disabled:D===V,children:"Next"})]})]})]})]})]})})},Sr=Object.freeze(Object.defineProperty({__proto__:null,default:za},Symbol.toStringTag,{value:"Module"}));var Se="Tabs",[Ea,Cr]=Ne(Se,[Ze]),_s=Ze(),[Ma,Me]=Ea(Se),Ds=l.forwardRef((s,t)=>{const{__scopeTabs:i,value:r,onValueChange:c,defaultValue:h,orientation:a="horizontal",dir:u,activationMode:x="automatic",...g}=s,j=Qe(u),[f,y]=Je({prop:r,onChange:c,defaultProp:h??"",caller:Se});return e.jsx(Ma,{scope:i,baseId:Ft(),value:f,onValueChange:y,orientation:a,dir:j,activationMode:x,children:e.jsx(G.div,{dir:j,"data-orientation":a,...g,ref:t})})});Ds.displayName=Se;var $s="TabsList",Ts=l.forwardRef((s,t)=>{const{__scopeTabs:i,loop:r=!0,...c}=s,h=Me($s,i),a=_s(i);return e.jsx(_t,{asChild:!0,...a,orientation:h.orientation,dir:h.dir,loop:r,children:e.jsx(G.div,{role:"tablist","aria-orientation":h.orientation,...c,ref:t})})});Ts.displayName=$s;var zs="TabsTrigger",Es=l.forwardRef((s,t)=>{const{__scopeTabs:i,value:r,disabled:c=!1,...h}=s,a=Me(zs,i),u=_s(i),x=Vs(a.baseId,r),g=Bs(a.baseId,r),j=r===a.value;return e.jsx(Dt,{asChild:!0,...u,focusable:!c,active:j,children:e.jsx(G.button,{type:"button",role:"tab","aria-selected":j,"aria-controls":g,"data-state":j?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:x,...h,ref:t,onMouseDown:se(s.onMouseDown,f=>{!c&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:se(s.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:se(s.onFocus,()=>{const f=a.activationMode!=="manual";!j&&!c&&f&&a.onValueChange(r)})})})});Es.displayName=zs;var Ms="TabsContent",Ls=l.forwardRef((s,t)=>{const{__scopeTabs:i,value:r,forceMount:c,children:h,...a}=s,u=Me(Ms,i),x=Vs(u.baseId,r),g=Bs(u.baseId,r),j=r===u.value,f=l.useRef(j);return l.useEffect(()=>{const y=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(y)},[]),e.jsx($t,{present:c||j,children:({present:y})=>e.jsx(G.div,{"data-state":j?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":x,hidden:!y,id:g,tabIndex:0,...a,ref:t,style:{...s.style,animationDuration:f.current?"0s":void 0},children:y&&h})})});Ls.displayName=Ms;function Vs(s,t){return`${s}-trigger-${t}`}function Bs(s,t){return`${s}-content-${t}`}var La=Ds,Va=Ts,Ba=Es,Oa=Ls;function Wa({className:s,...t}){return e.jsx(La,{"data-slot":"tabs",className:_("flex flex-col gap-2",s),...t})}function Ka({className:s,...t}){return e.jsx(Va,{"data-slot":"tabs-list",className:_("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function fe({className:s,...t}){return e.jsx(Ba,{"data-slot":"tabs-trigger",className:_("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function pe({className:s,...t}){return e.jsx(Oa,{"data-slot":"tabs-content",className:_("flex-1 outline-none",s),...t})}var Ha=sa();function Ua(){return Ha.useSyncExternalStore(qa,()=>!0,()=>!1)}function qa(){return()=>{}}var Le="Avatar",[Ga,Pr]=Ne(Le),[Ya,Os]=Ga(Le),Ws=l.forwardRef((s,t)=>{const{__scopeAvatar:i,...r}=s,[c,h]=l.useState("idle");return e.jsx(Ya,{scope:i,imageLoadingStatus:c,onImageLoadingStatusChange:h,children:e.jsx(G.span,{...r,ref:t})})});Ws.displayName=Le;var Ks="AvatarImage",Hs=l.forwardRef((s,t)=>{const{__scopeAvatar:i,src:r,onLoadingStatusChange:c=()=>{},...h}=s,a=Os(Ks,i),u=Ja(r,h),x=Tt(g=>{c(g),a.onImageLoadingStatusChange(g)});return ke(()=>{u!=="idle"&&x(u)},[u,x]),u==="loaded"?e.jsx(G.img,{...h,ref:t,src:r}):null});Hs.displayName=Ks;var Us="AvatarFallback",qs=l.forwardRef((s,t)=>{const{__scopeAvatar:i,delayMs:r,...c}=s,h=Os(Us,i),[a,u]=l.useState(r===void 0);return l.useEffect(()=>{if(r!==void 0){const x=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(x)}},[r]),a&&h.imageLoadingStatus!=="loaded"?e.jsx(G.span,{...c,ref:t}):null});qs.displayName=Us;function qe(s,t){return s?t?(s.src!==t&&(s.src=t),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Ja(s,{referrerPolicy:t,crossOrigin:i}){const r=Ua(),c=l.useRef(null),h=r?(c.current||(c.current=new window.Image),c.current):null,[a,u]=l.useState(()=>qe(h,s));return ke(()=>{u(qe(h,s))},[h,s]),ke(()=>{const x=f=>()=>{u(f)};if(!h)return;const g=x("loaded"),j=x("error");return h.addEventListener("load",g),h.addEventListener("error",j),t&&(h.referrerPolicy=t),typeof i=="string"&&(h.crossOrigin=i),()=>{h.removeEventListener("load",g),h.removeEventListener("error",j)}},[h,i,t]),a}var Qa=Ws,Xa=Hs,Za=qs;function er({className:s,...t}){return e.jsx(Qa,{"data-slot":"avatar",className:_("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...t})}function sr({className:s,...t}){return e.jsx(Xa,{"data-slot":"avatar-image",className:_("aspect-square size-full",s),...t})}function tr({className:s,...t}){return e.jsx(Za,{"data-slot":"avatar-fallback",className:_("bg-muted flex size-full items-center justify-center rounded-full",s),...t})}var Ve="Progress",Be=100,[ar,kr]=Ne(Ve),[rr,nr]=ar(Ve),Gs=l.forwardRef((s,t)=>{const{__scopeProgress:i,value:r=null,max:c,getValueLabel:h=ir,...a}=s;(c||c===0)&&!Ge(c)&&console.error(lr(`${c}`,"Progress"));const u=Ge(c)?c:Be;r!==null&&!Ye(r,u)&&console.error(or(`${r}`,"Progress"));const x=Ye(r,u)?r:null,g=be(x)?h(x,u):void 0;return e.jsx(rr,{scope:i,value:x,max:u,children:e.jsx(G.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":be(x)?x:void 0,"aria-valuetext":g,role:"progressbar","data-state":Qs(x,u),"data-value":x??void 0,"data-max":u,...a,ref:t})})});Gs.displayName=Ve;var Ys="ProgressIndicator",Js=l.forwardRef((s,t)=>{const{__scopeProgress:i,...r}=s,c=nr(Ys,i);return e.jsx(G.div,{"data-state":Qs(c.value,c.max),"data-value":c.value??void 0,"data-max":c.max,...r,ref:t})});Js.displayName=Ys;function ir(s,t){return`${Math.round(s/t*100)}%`}function Qs(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function be(s){return typeof s=="number"}function Ge(s){return be(s)&&!isNaN(s)&&s>0}function Ye(s,t){return be(s)&&!isNaN(s)&&s<=t&&s>=0}function lr(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Be}\`.`}function or(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Be} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var cr=Gs,dr=Js;function mr({className:s,value:t,...i}){return e.jsx(cr,{"data-slot":"progress",className:_("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...i,children:e.jsx(dr,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function ur({className:s,...t}){return e.jsx("textarea",{"data-slot":"textarea",className:_("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}const hr=()=>{const{id:s}=zt(),t=De(),{addItem:i}=ye(),{user:r,isAuthenticated:c}=ie(),{addToRecentlyViewed:h}=us(),[a,u]=l.useState(null),[x,g]=l.useState([]),[j,f]=l.useState([]),[y,b]=l.useState(!0),[p,v]=l.useState(1),[w,k]=l.useState(0),[E,S]=l.useState(!1),[d,D]=l.useState(!1),[N,A]=l.useState(5),[L,Y]=l.useState(""),[T,z]=l.useState(!1),[V,P]=l.useState(""),[$,B]=l.useState("");l.useEffect(()=>{if(!s)return;(async()=>{try{b(!0);const[F,ae]=await Promise.all([re.getProductById(s),Ce.getProductReviews(s,{page:0,size:10})]);if(F.success&&(u(F.data),h(F.data),F.data.category?.id)){const Oe=await re.getAllProducts({page:0,size:4,categoryId:F.data.category.id});if(Oe.success){const Zs=Oe.data.content?.filter(et=>et.id!==s)||[];f(Zs.slice(0,4))}}ae.success&&g(ae.data.content||[])}catch(F){console.error("Failed to fetch product:",F),U.error("Failed to load product details"),t("/products")}finally{b(!1)}})()},[s,t]);const O=async()=>{if(a)try{await i(a.id,p),U.success(`${p} ${a.title}(s) added to cart`)}catch{U.error("Failed to add item to cart")}},o=async()=>{if(a)try{await i(a.id,p),t("/cart")}catch{U.error("Failed to add item to cart")}},n=async()=>{if(!(!a||!c)){z(!0);try{if((await Ce.createReview({productId:a.id,rating:N,comment:L})).success){U.success("Review submitted successfully"),D(!1),Y(""),A(5);const F=await Ce.getProductReviews(a.id,{page:0,size:10});F.success&&g(F.data.content||[])}}catch{U.error("Failed to submit review")}finally{z(!1)}}},m=()=>{a&&k(C=>C===a.images.length-1?0:C+1)},I=()=>{a&&k(C=>C===0?a.images.length-1:C-1)};if(y)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[...Array(4)].map((C,F)=>e.jsx("div",{className:"aspect-square bg-gray-200 rounded"},F))})]}),e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]})});if(!a)return e.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Product Not Found"}),e.jsx(q,{to:"/products",children:e.jsx(R,{children:"Back to Products"})})]});const ee=a.originalPrice?Math.round((a.originalPrice-a.price)/a.originalPrice*100):0,xe=x.length>0?x.reduce((C,F)=>C+F.rating,0)/x.length:a.rating,Xs=[5,4,3,2,1].map(C=>({rating:C,count:x.filter(F=>F.rating===C).length,percentage:x.length>0?x.filter(F=>F.rating===C).length/x.length*100:0}));return e.jsxs("div",{className:"bg-white",children:[e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("nav",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(q,{to:"/",className:"hover:text-orange-600",children:"Home"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(q,{to:"/products",className:"hover:text-orange-600",children:"Products"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(q,{to:`/products?category=${a.category.id}`,className:"hover:text-orange-600",children:a.category.name}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-900",children:a.title})]})}),e.jsxs("div",{className:"container mx-auto px-4 pb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4",children:[e.jsx("img",{src:a.images[w]||a.thumbnail||"/api/placeholder/600/600",alt:a.title,className:"w-full h-full object-cover"}),a.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:I,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-2 shadow-lg transition-colors",children:e.jsx(Wt,{className:"w-6 h-6"})}),e.jsx("button",{onClick:m,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-2 shadow-lg transition-colors",children:e.jsx(Kt,{className:"w-6 h-6"})})]}),a.discount&&e.jsxs(H,{className:"absolute top-4 left-4 bg-red-500 text-white font-bold",children:[ee,"% OFF"]})]}),a.images.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-2",children:a.images.map((C,F)=>e.jsx("button",{onClick:()=>k(F),className:`aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 transition-colors ${w===F?"border-orange-500":"border-transparent"}`,children:e.jsx("img",{src:C||"/api/placeholder/150/150",alt:`${a.title} ${F+1}`,className:"w-full h-full object-cover"})},F))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:a.title}),e.jsx("p",{className:"text-lg text-gray-600 mb-4",children:a.shortDescription}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((C,F)=>e.jsx(Q,{className:`w-5 h-5 ${F<Math.floor(xe)?"text-orange-400 fill-current":"text-gray-300"}`},F)),e.jsx("span",{className:"text-lg font-medium ml-2",children:xe.toFixed(1)})]}),e.jsxs("span",{className:"text-blue-600 hover:underline cursor-pointer",children:["(",x.length," reviews)"]}),e.jsxs(H,{variant:"outline",children:["Brand: ",a.brand]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("span",{className:"text-3xl font-bold text-red-600",children:["$",a.price]}),a.originalPrice&&a.originalPrice>a.price&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-xl text-gray-500 line-through",children:["$",a.originalPrice]}),e.jsxs(H,{variant:"destructive",className:"text-lg px-3 py-1",children:["Save $",(a.originalPrice-a.price).toFixed(2)]})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:a.stock>0?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["In Stock (",a.stock," available)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Out of Stock"})]})}),a.stock>0&&e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("span",{className:"font-medium",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center border rounded-lg",children:[e.jsx("button",{onClick:()=>v(Math.max(1,p-1)),className:"p-2 hover:bg-gray-100 transition-colors",disabled:p<=1,children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx(ue,{type:"number",value:p,onChange:C=>v(Math.max(1,Math.min(a.stock,parseInt(C.target.value)||1))),className:"w-16 text-center border-0 focus:ring-0",min:1,max:a.stock}),e.jsx("button",{onClick:()=>v(Math.min(a.stock,p+1)),className:"p-2 hover:bg-gray-100 transition-colors",disabled:p>=a.stock,children:e.jsx(Ut,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{onClick:O,disabled:a.stock===0,className:"flex-1 h-12 amazon-button text-lg",children:[e.jsx(he,{className:"w-5 h-5 mr-2"}),"Add to Cart"]}),e.jsx(R,{variant:"outline",onClick:()=>S(!E),className:"h-12 px-4",children:e.jsx(ve,{className:`w-5 h-5 ${E?"fill-current text-red-500":""}`})})]}),e.jsx(R,{onClick:o,disabled:a.stock===0,className:"w-full h-12 bg-orange-500 hover:bg-orange-600 text-white text-lg",children:"Buy Now"}),e.jsxs(R,{variant:"outline",className:"w-full h-12",children:[e.jsx(qt,{className:"w-5 h-5 mr-2"}),"Share"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[e.jsx(Gt,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Free Delivery"}),e.jsx("div",{className:"text-sm text-gray-600",children:"On orders over $50"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[e.jsx(Yt,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Easy Returns"}),e.jsx("div",{className:"text-sm text-gray-600",children:"30-day return policy"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[e.jsx(Jt,{className:"w-6 h-6 text-purple-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Warranty"}),e.jsx("div",{className:"text-sm text-gray-600",children:"2-year protection"})]})]})]})]})]}),e.jsxs(Wa,{defaultValue:"description",className:"mb-12",children:[e.jsxs(Ka,{className:"grid w-full grid-cols-4",children:[e.jsx(fe,{value:"description",children:"Description"}),e.jsx(fe,{value:"specifications",children:"Specifications"}),e.jsxs(fe,{value:"reviews",children:["Reviews (",x.length,")"]}),e.jsx(fe,{value:"qa",children:"Q&A"})]}),e.jsx(pe,{value:"description",className:"mt-6",children:e.jsx(W,{children:e.jsxs(K,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Product Description"}),e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:a.description}),a.features&&a.features.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Key Features:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:a.features.map((C,F)=>e.jsx("li",{className:"text-gray-700",children:C},F))})]})]})]})})}),e.jsx(pe,{value:"specifications",className:"mt-6",children:e.jsx(W,{children:e.jsxs(K,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Specifications"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx("div",{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium",children:"Brand"}),e.jsx("span",{children:a.brand})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium",children:"SKU"}),e.jsx("span",{children:a.sku})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium",children:"Category"}),e.jsx("span",{children:a.category.name})]}),Object.entries(a.specifications||{}).map(([C,F])=>e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium capitalize",children:C.replace(/([A-Z])/g," $1")}),e.jsx("span",{children:F})]},C))]})})})]})})}),e.jsx(pe,{value:"reviews",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx(W,{children:e.jsxs(K,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Customer Reviews"}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:xe.toFixed(1)}),e.jsx("div",{className:"flex justify-center mb-2",children:[...Array(5)].map((C,F)=>e.jsx(Q,{className:`w-6 h-6 ${F<Math.floor(xe)?"text-orange-400 fill-current":"text-gray-300"}`},F))}),e.jsxs("div",{className:"text-gray-600",children:[x.length," reviews"]})]}),e.jsx("div",{className:"space-y-2",children:Xs.map(({rating:C,count:F,percentage:ae})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm w-8",children:C}),e.jsx(Q,{className:"w-4 h-4 text-orange-400 fill-current"}),e.jsx(mr,{value:ae,className:"flex-1"}),e.jsx("span",{className:"text-sm text-gray-600 w-8",children:F})]},C))}),c&&e.jsx(R,{onClick:()=>D(!d),className:"w-full mt-4",variant:"outline",children:"Write a Review"})]})}),d&&c&&e.jsx(W,{className:"mt-4",children:e.jsxs(K,{className:"p-6",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Write Your Review"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rating"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(C=>e.jsx("button",{onClick:()=>A(C),className:"transition-colors",children:e.jsx(Q,{className:`w-6 h-6 ${C<=N?"text-orange-400 fill-current":"text-gray-300"}`})},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Review"}),e.jsx(ur,{value:L,onChange:C=>Y(C.target.value),placeholder:"Share your experience with this product...",rows:4})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{onClick:n,disabled:T||!L.trim(),children:T?"Submitting...":"Submit Review"}),e.jsx(R,{variant:"outline",onClick:()=>D(!1),children:"Cancel"})]})]})]})})]}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:x.length===0?e.jsx(W,{children:e.jsxs(K,{className:"p-8 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(Q,{className:"w-12 h-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No reviews yet"}),e.jsx("p",{className:"text-gray-600",children:"Be the first to review this product!"})]})}):x.map(C=>e.jsx(W,{children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(er,{children:[e.jsx(sr,{src:C.user?.profilePicture}),e.jsxs(tr,{children:[C.user?.firstName?.[0],C.user?.lastName?.[0]]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"font-medium",children:[C.user?.firstName," ",C.user?.lastName]}),C.user?.isVerified&&e.jsx(Qt,{className:"w-4 h-4 text-blue-500"}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((F,ae)=>e.jsx(Q,{className:`w-4 h-4 ${ae<C.rating?"text-orange-400 fill-current":"text-gray-300"}`},ae))}),e.jsx("span",{className:"text-sm text-gray-600",children:new Date(C.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:C.comment}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("button",{className:"flex items-center gap-1 hover:text-gray-900",children:[e.jsx(Xt,{className:"w-4 h-4"}),"Helpful (",C.helpfulCount||0,")"]}),e.jsxs("button",{className:"flex items-center gap-1 hover:text-gray-900",children:[e.jsx(Zt,{className:"w-4 h-4"}),"Not helpful"]})]})]})]})})},C.id))})]})}),e.jsx(pe,{value:"qa",className:"mt-6",children:e.jsx(W,{children:e.jsxs(K,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Questions & Answers"}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(ea,{className:"w-12 h-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No questions yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Be the first to ask a question about this product!"}),c&&e.jsx(R,{children:"Ask a Question"})]})]})})})]}),j.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Related Products"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map(C=>e.jsx(ze,{product:C},C.id))})]}),e.jsx(xa,{excludeProductId:a?.id,title:"Your Recently Viewed Items",limit:6,variant:"horizontal",className:"mb-8"})]})]})},Rr=Object.freeze(Object.defineProperty({__proto__:null,default:hr},Symbol.toStringTag,{value:"Module"})),xr=()=>{const[s,t]=es(),[i,r]=l.useState([]),[c,h]=l.useState(0),[a,u]=l.useState(!1),[x,g]=l.useState("grid"),[j,f]=l.useState("relevance"),[y,b]=l.useState("desc"),[p,v]=l.useState(1),[w,k]=l.useState([]),[E,S]=l.useState([]),[d,D]=l.useState(!1),[N,A]=l.useState({categories:[],brands:[],minPrice:0,maxPrice:1e4,minRating:0,hasDiscount:!1,inStockOnly:!0,freeShipping:!1}),[L,Y]=l.useState([]),T=s.get("q")||"",z=s.get("category")||"";l.useEffect(()=>{(async()=>{try{const[m]=await Promise.all([Te.getCategories()]);k(m)}catch(m){console.error("Failed to load initial data:",m)}})()},[]),l.useEffect(()=>{V()},[T,z,N,j,y,p]);const V=async()=>{if(!(!T&&!z)){u(!0);try{const n=z?[z]:N.categories,m=await re.advancedSearch({q:T||void 0,categories:n.length>0?n:void 0,brands:N.brands.length>0?N.brands:void 0,minPrice:N.minPrice>0?N.minPrice:void 0,maxPrice:N.maxPrice<1e4?N.maxPrice:void 0,minRating:N.minRating>0?N.minRating:void 0,hasDiscount:N.hasDiscount,inStockOnly:N.inStockOnly,freeShipping:N.freeShipping,page:p-1,size:20,sortBy:j,sortDir:y});r(m.content),h(m.totalElements);const I=[...new Set(m.content.map(ee=>ee.brand).filter(Boolean))];S(I)}catch(n){console.error("Search failed:",n),r([]),h(0)}u(!1)}},P=()=>{const n=[];N.categories.length>0&&n.push(`Categories: ${N.categories.join(", ")}`),N.brands.length>0&&n.push(`Brands: ${N.brands.join(", ")}`),(N.minPrice>0||N.maxPrice<1e4)&&n.push(`Price: $${N.minPrice} - $${N.maxPrice}`),N.minRating>0&&n.push(`Rating: ${N.minRating}+ stars`),N.hasDiscount&&n.push("On Sale"),N.inStockOnly||n.push("Include Out of Stock"),N.freeShipping&&n.push("Free Shipping"),Y(n)};l.useEffect(()=>{P()},[N]);const $=()=>{A({categories:[],brands:[],minPrice:0,maxPrice:1e4,minRating:0,hasDiscount:!1,inStockOnly:!0,freeShipping:!1}),v(1)},B=n=>{n.startsWith("Categories:")?A(m=>({...m,categories:[]})):n.startsWith("Brands:")?A(m=>({...m,brands:[]})):n.startsWith("Price:")?A(m=>({...m,minPrice:0,maxPrice:1e4})):n.startsWith("Rating:")?A(m=>({...m,minRating:0})):n==="On Sale"?A(m=>({...m,hasDiscount:!1})):n==="Include Out of Stock"?A(m=>({...m,inStockOnly:!0})):n==="Free Shipping"&&A(m=>({...m,freeShipping:!1})),v(1)},O=n=>{const m=new URLSearchParams(s);n?m.set("q",n):m.delete("q"),t(m),v(1)},o=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Categories"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:w.map(n=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Z,{checked:N.categories.includes(n.id),onCheckedChange:m=>{A(m?I=>({...I,categories:[...I.categories,n.id]}):I=>({...I,categories:I.categories.filter(ee=>ee!==n.id)})),v(1)}}),e.jsx("span",{className:"text-sm",children:n.name})]},n.id))})]}),e.jsx(te,{}),E.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Brands"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:E.map(n=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Z,{checked:N.brands.includes(n),onCheckedChange:m=>{A(m?I=>({...I,brands:[...I.brands,n]}):I=>({...I,brands:I.brands.filter(ee=>ee!==n)})),v(1)}}),e.jsx("span",{className:"text-sm",children:n})]},n))})]}),e.jsx(te,{})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Price Range"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ue,{type:"number",placeholder:"Min",value:N.minPrice||"",onChange:n=>{A(m=>({...m,minPrice:parseInt(n.target.value)||0}))},className:"w-20"}),e.jsx("span",{children:"to"}),e.jsx(ue,{type:"number",placeholder:"Max",value:N.maxPrice||"",onChange:n=>{A(m=>({...m,maxPrice:parseInt(n.target.value)||1e4}))},className:"w-20"})]}),e.jsx(ks,{value:[N.minPrice,N.maxPrice],onValueChange:([n,m])=>{A(I=>({...I,minPrice:n,maxPrice:m}))},max:1e4,step:10,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:["$",N.minPrice]}),e.jsxs("span",{children:["$",N.maxPrice]})]})]})]}),e.jsx(te,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Customer Rating"}),e.jsx("div",{className:"space-y-2",children:[4,3,2,1].map(n=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Z,{checked:N.minRating===n,onCheckedChange:m=>{A(I=>({...I,minRating:m?n:0})),v(1)}}),e.jsxs("div",{className:"flex items-center",children:[[...Array(n)].map((m,I)=>e.jsx(Q,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},I)),e.jsx("span",{className:"ml-2 text-sm",children:"& Up"})]})]},n))})]}),e.jsx(te,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Z,{checked:N.hasDiscount,onCheckedChange:n=>{A(m=>({...m,hasDiscount:n})),v(1)}}),e.jsx("span",{className:"text-sm",children:"On Sale"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Z,{checked:N.inStockOnly,onCheckedChange:n=>{A(m=>({...m,inStockOnly:n})),v(1)}}),e.jsx("span",{className:"text-sm",children:"In Stock Only"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Z,{checked:N.freeShipping,onCheckedChange:n=>{A(m=>({...m,freeShipping:n})),v(1)}}),e.jsx("span",{className:"text-sm",children:"Free Shipping"})]})]})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx(ia,{onSearch:O,placeholder:`Search for "${T}"`})})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Search Results"}),T&&e.jsxs("p",{className:"text-gray-600",children:['Showing results for "',e.jsx("span",{className:"font-semibold",children:T}),'"',c>0&&` (${c.toLocaleString()} products)`]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(R,{variant:x==="grid"?"default":"ghost",size:"sm",onClick:()=>g("grid"),className:"rounded-r-none",children:e.jsx(rs,{className:"w-4 h-4"})}),e.jsx(R,{variant:x==="list"?"default":"ghost",size:"sm",onClick:()=>g("list"),className:"rounded-l-none",children:e.jsx(ns,{className:"w-4 h-4"})})]}),e.jsxs(Rs,{value:`${j}-${y}`,onValueChange:n=>{const[m,I]=n.split("-");f(m),b(I),v(1)},children:[e.jsx(Is,{className:"w-48",children:e.jsx(As,{})}),e.jsxs(Fs,{children:[e.jsx(J,{value:"relevance-desc",children:"Most Relevant"}),e.jsx(J,{value:"price-asc",children:"Price: Low to High"}),e.jsx(J,{value:"price-desc",children:"Price: High to Low"}),e.jsx(J,{value:"averageRating-desc",children:"Highest Rated"}),e.jsx(J,{value:"totalSales-desc",children:"Best Selling"}),e.jsx(J,{value:"createdAt-desc",children:"Newest First"})]})]}),e.jsxs(is,{open:d,onOpenChange:D,children:[e.jsx(ls,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"md:hidden",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Filters"]})}),e.jsxs(os,{side:"left",className:"w-80",children:[e.jsxs(cs,{children:[e.jsx(ds,{children:"Filters"}),e.jsx(ms,{children:"Refine your search results"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(o,{})})]})]})]})]}),L.length>0&&e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Filters:"}),L.map((n,m)=>e.jsxs(H,{variant:"secondary",className:"cursor-pointer hover:bg-red-100",onClick:()=>B(n),children:[n,e.jsx(X,{className:"w-3 h-3 ml-1"})]},m)),e.jsx(R,{variant:"ghost",size:"sm",onClick:$,className:"text-red-600 hover:text-red-700",children:"Clear all"})]})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("aside",{className:"hidden md:block w-64 flex-shrink-0",children:e.jsx(W,{children:e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"font-semibold",children:"Filters"}),e.jsx(R,{variant:"ghost",size:"sm",onClick:$,className:"text-sm",children:"Clear all"})]}),e.jsx(o,{})]})})}),e.jsx("main",{className:"flex-1",children:a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})}):i.length===0?e.jsx(W,{children:e.jsxs(K,{className:"p-12 text-center",children:[e.jsx(Re,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search terms or filters"}),e.jsx(R,{onClick:$,children:"Clear filters"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`
                  ${x==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4"}
                `,children:i.map(n=>e.jsx(ze,{product:n,variant:x},n.id))}),c>20&&e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2",children:[e.jsx(R,{variant:"outline",disabled:p===1,onClick:()=>v(n=>Math.max(1,n-1)),children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,Math.ceil(c/20))},(n,m)=>{const I=m+1;return e.jsx(R,{variant:p===I?"default":"outline",size:"sm",onClick:()=>v(I),children:I},I)})}),e.jsx(R,{variant:"outline",disabled:p>=Math.ceil(c/20),onClick:()=>v(n=>n+1),children:"Next"})]})]})})]})]})]})},Ar=Object.freeze(Object.defineProperty({__proto__:null,default:xr},Symbol.toStringTag,{value:"Module"}));export{er as A,H as B,la as C,ta as D,yr as E,ua as F,Sr as G,Rr as H,Ar as I,ze as P,xa as R,Rs as S,Wa as T,me as W,Is as a,As as b,Fs as c,J as d,Ka as e,fe as f,pe as g,ha as h,sr as i,tr as j,ca as k,ia as l,aa as m,ra as n,jr as o,Ue as p,is as q,ls as r,os as s,cs as t,ye as u,ds as v,ms as w,br as x,Nr as y,oa as z};
