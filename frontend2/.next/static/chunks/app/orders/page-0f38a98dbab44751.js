(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{995:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(5155),a=r(2115),i=r(6874),c=r.n(i),d=r(1703);function o(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[o,n]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,d.FK)();t(e||[])}catch(e){n("Failed to load orders"),console.error(e)}finally{i(!1)}})()},[]);let l=e=>{switch(e){case"confirmed":return"text-green-600 bg-green-100";case"shipped":return"text-blue-600 bg-blue-100";case"delivered":return"text-green-700 bg-green-200";case"cancelled":return"text-red-600 bg-red-100";default:return"text-yellow-600 bg-yellow-100"}},m=e=>{let t=["confirmed","processing","shipped","out_for_delivery","delivered"].indexOf(e);return[{name:"Order Confirmed",status:"confirmed"},{name:"Processing",status:"processing"},{name:"Shipped",status:"shipped"},{name:"Out for Delivery",status:"out_for_delivery"},{name:"Delivered",status:"delivered"}].map((e,r)=>({...e,completed:r<=t,active:r===t}))};return r?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2874f0] mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading your orders..."})]})}):o?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("i",{className:"ri-error-warning-line text-6xl text-red-500 mb-4 w-24 h-24 flex items-center justify-center mx-auto"}),(0,s.jsx)("p",{className:"text-red-600 text-lg",children:o})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm mb-6 text-gray-600",children:[(0,s.jsx)(c(),{href:"/",className:"hover:text-[#2874f0] cursor-pointer",children:"Home"}),(0,s.jsx)("i",{className:"ri-arrow-right-line w-4 h-4 flex items-center justify-center"}),(0,s.jsx)("span",{className:"text-gray-800",children:"My Orders"})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Orders"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Track your orders and view purchase history"})]}),0===e.length?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,s.jsx)("i",{className:"ri-shopping-bag-line text-6xl text-gray-300 mb-6 w-24 h-24 flex items-center justify-center mx-auto"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No Orders Yet"}),(0,s.jsx)("p",{className:"text-gray-600 mb-8",children:"You haven't placed any orders yet. Start shopping to see your orders here!"}),(0,s.jsx)(c(),{href:"/",className:"inline-block bg-[#2874f0] text-white px-8 py-3 rounded-md font-semibold hover:bg-blue-600 transition-colors whitespace-nowrap cursor-pointer",children:"Start Shopping"})]}):(0,s.jsx)("div",{className:"space-y-6",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:[(0,s.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:(0,s.jsxs)("div",{className:"flex items-center space-x-6 mb-4 md:mb-0",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Order #",e.order_number]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Placed on ",new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["₹",e.total_amount.toLocaleString()]}),(0,s.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium ".concat(l(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]})}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:m(e.status).map((t,r)=>(0,s.jsxs)("div",{className:"flex flex-col items-center relative",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(t.completed?"bg-green-500 text-white":t.active?"bg-[#2874f0] text-white":"bg-gray-200 text-gray-400"),children:t.completed?(0,s.jsx)("i",{className:"ri-check-line text-sm w-4 h-4 flex items-center justify-center"}):(0,s.jsx)("span",{className:"text-xs",children:r+1})}),(0,s.jsx)("p",{className:"text-xs text-center mt-2 text-gray-600 max-w-20",children:t.name}),r<m(e.status).length-1&&(0,s.jsx)("div",{className:"absolute top-4 left-8 w-full h-0.5 ".concat(t.completed?"bg-green-500":"bg-gray-200"),style:{width:"100px"}})]},r))})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("h4",{className:"font-medium text-gray-900 mb-4",children:["Order Items (",e.order_items.length,")"]}),(0,s.jsx)("div",{className:"space-y-4",children:e.order_items.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(c(),{href:"/product/".concat(e.product_id),children:(0,s.jsx)("img",{src:e.product_image||"https://via.placeholder.com/150",alt:e.product_name,className:"w-20 h-20 object-cover rounded-md cursor-pointer object-top"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(c(),{href:"/product/".concat(e.product_id),children:(0,s.jsx)("h5",{className:"font-medium text-gray-900 hover:text-[#2874f0] cursor-pointer",children:e.product_name})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[(0,s.jsxs)("span",{children:["Qty: ",e.quantity]}),(0,s.jsxs)("span",{children:["₹",e.price.toLocaleString()]})]})]})]},e.id))}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"flex space-x-3 mb-4 sm:mb-0",children:[(0,s.jsx)("button",{className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 whitespace-nowrap cursor-pointer",children:"Track Order"}),(0,s.jsx)("button",{className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 whitespace-nowrap cursor-pointer",children:"Download Invoice"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(c(),{href:"/orders/".concat(e.id),className:"text-[#2874f0] hover:underline text-sm cursor-pointer",children:"View Details"}),"delivered"===e.status&&(0,s.jsx)("button",{className:"text-[#2874f0] hover:underline text-sm cursor-pointer",children:"Write Review"})]})]})]})]},e.id))})]})})}},1703:(e,t,r)=>{"use strict";r.d(t,{BH:()=>d,FK:()=>a,Jr:()=>m,Qg:()=>c,U4:()=>i,dP:()=>l,hh:()=>o,ky:()=>n,oE:()=>h});var s=r(3168);let a=async()=>{try{let{data:{user:e}}=await s.N.auth.getUser();if(!e)throw Error("User not authenticated");let{data:t,error:r}=await s.N.from("orders").select("\n        *,\n        order_items (*)\n      ").eq("user_id",e.id).order("created_at",{ascending:!1});if(r)throw r;return t}catch(e){throw console.error("Error fetching orders:",e),e}},i=async e=>{try{let{data:{user:t}}=await s.N.auth.getUser();if(!t)throw Error("User not authenticated");let{error:r}=await s.N.from("wishlist").upsert({user_id:t.id,product_id:e.id,product_name:e.name,product_image:e.image,price:e.price,category:e.category});if(r)throw r}catch(e){throw console.error("Error adding to wishlist:",e),e}},c=async e=>{try{let{data:{user:t}}=await s.N.auth.getUser();if(!t)throw Error("User not authenticated");let{error:r}=await s.N.from("wishlist").delete().eq("user_id",t.id).eq("product_id",e);if(r)throw r}catch(e){throw console.error("Error removing from wishlist:",e),e}},d=async()=>{try{let{data:{user:e}}=await s.N.auth.getUser();if(!e)throw Error("User not authenticated");let{data:t,error:r}=await s.N.from("wishlist").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(r)throw r;return t}catch(e){throw console.error("Error fetching wishlist:",e),e}},o=async e=>{try{let{data:{user:t}}=await s.N.auth.getUser();if(!t)throw Error("User not authenticated");let{error:r}=await s.N.from("saved_items").upsert({user_id:t.id,product_id:e.id,product_name:e.name,product_image:e.image,price:e.price,category:e.category});if(r)throw r}catch(e){throw console.error("Error saving for later:",e),e}},n=async()=>{try{let{data:{user:e}}=await s.N.auth.getUser();if(!e)throw Error("User not authenticated");let{data:t,error:r}=await s.N.from("saved_items").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(r)throw r;return t}catch(e){throw console.error("Error fetching saved items:",e),e}},l=async e=>{try{let{data:{user:t}}=await s.N.auth.getUser();if(!t)throw Error("User not authenticated");let{error:r}=await s.N.from("saved_items").delete().eq("user_id",t.id).eq("product_id",e);if(r)throw r}catch(e){throw console.error("Error removing saved item:",e),e}},m=async(e,t,r)=>{try{let{data:{user:a}}=await s.N.auth.getUser();if(!a)throw Error("User not authenticated");let{error:i}=await s.N.from("product_reviews").upsert({user_id:a.id,product_id:e,rating:t,comment:r,verified_purchase:!1});if(i)throw i}catch(e){throw console.error("Error adding review:",e),e}},h=async()=>{try{let{data:{user:e}}=await s.N.auth.getUser();if(!e)throw Error("User not authenticated");let{data:t,error:r}=await s.N.from("user_preferences").select("*").eq("user_id",e.id).single();if(r&&"PGRST116"!==r.code)throw r;return t}catch(e){throw console.error("Error fetching preferences:",e),e}}},3168:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(5647).UU)("https://ipafdwwlinovyuvkqitg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlwYWZkd3dsaW5vdnl1dmtxaXRnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxMTQ4OTEsImV4cCI6MjA2OTY5MDg5MX0.1CiHbIrNE7Z2EXOooZlsOEOPJtFrGd6szOPDSJ1gVaQ")},4142:(e,t,r)=>{Promise.resolve().then(r.bind(r,995))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,641,647,441,684,358],()=>t(4142)),_N_E=e.O()}]);