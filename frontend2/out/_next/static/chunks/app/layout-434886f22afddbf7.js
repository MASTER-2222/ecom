(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{208:e=>{e.exports={style:{fontFamily:"'Pacifico', 'Pacifico Fallback'",fontWeight:400,fontStyle:"normal"},className:"__className_5f64cf",variable:"__variable_5f64cf"}},5688:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},7499:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>u,A:()=>d});var r=a(5155),o=a(2115),s=a(3464);let l="ritkart_token",n=s.A.create({baseURL:"http://localhost:8080/api",timeout:1e4,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=localStorage.getItem(l);return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t,a;return console.warn("API Error:",e.message,null==(t=e.response)?void 0:t.status),(null==(a=e.response)?void 0:a.status)===401&&(localStorage.removeItem(l),window.location.pathname.includes("/auth")||(window.location.href="/auth/login")),Promise.reject(e)});let i={login:async(e,t)=>{let a=await n.post("/auth/login",{email:e,password:t});return a.data.success&&a.data.data.token&&localStorage.setItem(l,a.data.data.token),a.data},register:async e=>{let t=await n.post("/auth/register",e);return t.data.success&&t.data.data.token&&localStorage.setItem(l,t.data.data.token),t.data},logout:async()=>{try{await n.post("/auth/logout")}catch(e){console.warn("Logout API call failed:",e)}finally{localStorage.removeItem(l)}},getCurrentUser:async()=>(await n.get("/auth/profile")).data.data.user,isLoggedIn:()=>!!localStorage.getItem(l)},c=(0,o.createContext)(void 0);function u(e){let{children:t}=e,[a,s]=(0,o.useState)(null),[l,n]=(0,o.useState)(!0),[u,d]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{try{if(i.isLoggedIn()){let e=await i.getCurrentUser();s(e),d(!0)}}catch(e){console.error("Failed to get current user:",e),await i.logout()}finally{n(!1)}})()},[]);let f=async(e,t)=>{try{let a=await i.login(e,t);if(a.success)return s(a.data.user),d(!0),!0;return!1}catch(e){return console.error("Login failed:",e),!1}},g=async e=>{try{let t=await i.register(e);if(t.success)return s(t.data.user),d(!0),!0;return!1}catch(e){return console.error("Registration failed:",e),!1}},h=async()=>{try{await i.logout()}catch(e){console.error("Logout failed:",e)}finally{s(null),d(!1)}};return(0,r.jsx)(c.Provider,{value:{user:a,login:f,register:g,logout:h,isLoading:l,isLoggedIn:u},children:t})}function d(){let e=(0,o.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9190:(e,t,a)=>{Promise.resolve().then(a.bind(a,7499)),Promise.resolve().then(a.t.bind(a,208,23)),Promise.resolve().then(a.t.bind(a,5688,23)),Promise.resolve().then(a.t.bind(a,9432,23)),Promise.resolve().then(a.t.bind(a,9324,23))},9324:()=>{},9432:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}}},e=>{var t=t=>e(e.s=t);e.O(0,[129,641,464,441,684,358],()=>t(9190)),_N_E=e.O()}]);